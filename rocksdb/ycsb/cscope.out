cscope 15 $HOME/git/ZNS/rocksdb/ycsb               0000077840
	@basic_db.h

1 #iâdeà
YCSB_C_BASIC_DB_H_


2 
	#YCSB_C_BASIC_DB_H_


	)

4 
	~"ycsb/db.h
"

6 
	~<io¡»am
>

7 
	~<¡ršg
>

8 
	~<mu‹x
>

9 
	~"ycsb/´İ”t›s.h
"

11 
usšg
 
	g¡d
::
cout
;

12 
usšg
 
	g¡d
::
’dl
;

14 
Çme¥aû
 
	gycsbc
 {

16 şas 
	cBasicDB
 : 
public
 
DB
 {

17 
public
:

18 
In™
() {

19 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
lock
(
mu‹x_
);

20 
	gcout
 << "A‚ewh»ad begš wÜkšg." << 
	g’dl
;

23 
R—d
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
,

24 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> *
f›lds
,

25 
¡d
::
veùÜ
<
KVPaœ
> &
»suÉ
) {

26 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
lock
(
mu‹x_
);

27 
	gcout
 << "READ " << 
	gbË
 << ' ' << 
	gkey
;

28 ià(
	gf›lds
) {

29 
	gcout
 << " [ ";

30 autØ
	gf
 : *
f›lds
) {

31 
cout
 << 
f
 << ' ';

33 
	gcout
 << ']' << 
	g’dl
;

35 
	gcout
 << " <‡Î f›ld >" << 
	g’dl
;

40 
Sÿn
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
,

41 
Ën
, cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> *
f›lds
,

42 
¡d
::
veùÜ
<¡d::veùÜ<
KVPaœ
>> &
»suÉ
) {

43 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
lock
(
mu‹x_
);

44 
	gcout
 << "SCAN " << 
	gbË
 << ' ' << 
	gkey
 << " " << 
	gËn
;

45 ià(
	gf›lds
) {

46 
	gcout
 << " [ ";

47 autØ
	gf
 : *
f›lds
) {

48 
cout
 << 
f
 << ' ';

50 
	gcout
 << ']' << 
	g’dl
;

52 
	gcout
 << " <‡Î f›ld >" << 
	g’dl
;

57 
Upd©e
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
,

58 
¡d
::
veùÜ
<
KVPaœ
> &
v®ues
) {

59 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
lock
(
mu‹x_
);

60 
	gcout
 << "UPDATE " << 
	gbË
 << ' ' << 
	gkey
 << " [ ";

61 autØ
	gv
 : 
v®ues
) {

62 
cout
 << 
v
.
fœ¡
 << '=' << v.
£cÚd
 << ' ';

64 
	gcout
 << ']' << 
	g’dl
;

68 
In£¹
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
,

69 
¡d
::
veùÜ
<
KVPaœ
> &
v®ues
) {

70 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
lock
(
mu‹x_
);

71 
	gcout
 << "INSERT " << 
	gbË
 << ' ' << 
	gkey
 << " [ ";

72 autØ
	gv
 : 
v®ues
) {

73 
cout
 << 
v
.
fœ¡
 << '=' << v.
£cÚd
 << ' ';

75 
	gcout
 << ']' << 
	g’dl
;

79 
D–‘e
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
) {

80 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
lock
(
mu‹x_
);

81 
	gcout
 << "DELETE " << 
	gbË
 << ' ' << 
	gkey
 << 
	g’dl
;

85 
	g´iv©e
:

86 
¡d
::
mu‹x
 
mu‹x_
;

	@client.h

9 #iâdeà
YCSB_C_CLIENT_H_


10 
	#YCSB_C_CLIENT_H_


	)

12 
	~<¡ršg
>

13 
	~"ycsb/db.h
"

14 
	~"ycsb/cÜe_wÜklßd.h
"

15 
	~"ycsb/uts.h
"

17 
Çme¥aû
 
	gycsbc
 {

19 şas 
	cCl›Á
 {

20 
	gpublic
:

21 
Cl›Á
(
DB
 &
db
, 
CÜeWÜklßd
 &
wl
è: 
db_
(db), 
wÜklßd_
(wl) { }

23 
vœtu®
 
boŞ
 
DoIn£¹
();

24 
vœtu®
 
boŞ
 
DoT¿n§ùiÚ
();

26 
	gvœtu®
 ~
Cl›Á
() { }

28 
	g´Ùeùed
:

30 
vœtu®
 
T¿n§ùiÚR—d
();

31 
vœtu®
 
T¿n§ùiÚR—dModifyWr™e
();

32 
vœtu®
 
T¿n§ùiÚSÿn
();

33 
vœtu®
 
T¿n§ùiÚUpd©e
();

34 
vœtu®
 
T¿n§ùiÚIn£¹
();

36 
	gDB
 &
	gdb_
;

37 
	gCÜeWÜklßd
 &
	gwÜklßd_
;

40 
šlše
 
boŞ
 
	gCl›Á
::
	$DoIn£¹
() {

41 
¡d
::
¡ršg
 
key
 = 
wÜklßd_
.
	`NextSequ’ûKey
();

42 
¡d
::
veùÜ
<
DB
::
KVPaœ
> 
·œs
;

43 
wÜklßd_
.
	`BudV®ues
(
·œs
);

44  (
db_
.
	`In£¹
(
wÜklßd_
.
	`NextTabË
(), 
key
, 
·œs
è=ğ
DB
::
kOK
);

45 
	}
}

47 
šlše
 
boŞ
 
	gCl›Á
::
	$DoT¿n§ùiÚ
() {

48 
¡©us
 = -1;

49 
wÜklßd_
.
	`NextO³¿tiÚ
()) {

50 
READ
:

51 
¡©us
 = 
	`T¿n§ùiÚR—d
();

53 
UPDATE
:

54 
¡©us
 = 
	`T¿n§ùiÚUpd©e
();

56 
INSERT
:

57 
¡©us
 = 
	`T¿n§ùiÚIn£¹
();

59 
SCAN
:

60 
¡©us
 = 
	`T¿n§ùiÚSÿn
();

62 
READMODIFYWRITE
:

63 
¡©us
 = 
	`T¿n§ùiÚR—dModifyWr™e
();

66 
throw
 
uts
::
	`Exû±iÚ
("Operation„equest is‚ot„ecognized!");

68 
	`as£¹
(
¡©us
 >= 0);

69  (
¡©us
 =ğ
DB
::
kOK
);

70 
	}
}

72 
šlše
 
	gCl›Á
::
	$T¿n§ùiÚR—d
() {

73 cÚ¡ 
¡d
::
¡ršg
 &
bË
 = 
wÜklßd_
.
	`NextTabË
();

74 cÚ¡ 
¡d
::
¡ršg
 &
key
 = 
wÜklßd_
.
	`NextT¿n§ùiÚKey
();

75 
¡d
::
veùÜ
<
DB
::
KVPaœ
> 
»suÉ
;

76 ià(!
wÜklßd_
.
	`»ad_®l_f›lds
()) {

77 
¡d
::
veùÜ
<¡d::
¡ršg
> 
f›lds
;

78 
f›lds
.
	`push_back
("f›ld" + 
wÜklßd_
.
	`NextF›ldName
());

79  
db_
.
	`R—d
(
bË
, 
key
, &
f›lds
, 
»suÉ
);

81  
db_
.
	`R—d
(
bË
, 
key
, 
NULL
, 
»suÉ
);

83 
	}
}

85 
šlše
 
	gCl›Á
::
	$T¿n§ùiÚR—dModifyWr™e
() {

86 cÚ¡ 
¡d
::
¡ršg
 &
bË
 = 
wÜklßd_
.
	`NextTabË
();

87 cÚ¡ 
¡d
::
¡ršg
 &
key
 = 
wÜklßd_
.
	`NextT¿n§ùiÚKey
();

88 
¡d
::
veùÜ
<
DB
::
KVPaœ
> 
»suÉ
;

90 ià(!
wÜklßd_
.
	`»ad_®l_f›lds
()) {

91 
¡d
::
veùÜ
<¡d::
¡ršg
> 
f›lds
;

92 
f›lds
.
	`push_back
("f›ld" + 
wÜklßd_
.
	`NextF›ldName
());

93 
db_
.
	`R—d
(
bË
, 
key
, &
f›lds
, 
»suÉ
);

95 
db_
.
	`R—d
(
bË
, 
key
, 
NULL
, 
»suÉ
);

98 
¡d
::
veùÜ
<
DB
::
KVPaœ
> 
v®ues
;

99 ià(
wÜklßd_
.
	`wr™e_®l_f›lds
()) {

100 
wÜklßd_
.
	`BudV®ues
(
v®ues
);

102 
wÜklßd_
.
	`BudUpd©e
(
v®ues
);

104  
db_
.
	`Upd©e
(
bË
, 
key
, 
v®ues
);

105 
	}
}

107 
šlše
 
	gCl›Á
::
	$T¿n§ùiÚSÿn
() {

108 cÚ¡ 
¡d
::
¡ršg
 &
bË
 = 
wÜklßd_
.
	`NextTabË
();

109 cÚ¡ 
¡d
::
¡ršg
 &
key
 = 
wÜklßd_
.
	`NextT¿n§ùiÚKey
();

110 
Ën
 = 
wÜklßd_
.
	`NextSÿnL’gth
();

111 
¡d
::
veùÜ
<¡d::veùÜ<
DB
::
KVPaœ
>> 
»suÉ
;

112 ià(!
wÜklßd_
.
	`»ad_®l_f›lds
()) {

113 
¡d
::
veùÜ
<¡d::
¡ršg
> 
f›lds
;

114 
f›lds
.
	`push_back
("f›ld" + 
wÜklßd_
.
	`NextF›ldName
());

115  
db_
.
	`Sÿn
(
bË
, 
key
, 
Ën
, &
f›lds
, 
»suÉ
);

117  
db_
.
	`Sÿn
(
bË
, 
key
, 
Ën
, 
NULL
, 
»suÉ
);

119 
	}
}

121 
šlše
 
	gCl›Á
::
	$T¿n§ùiÚUpd©e
() {

122 cÚ¡ 
¡d
::
¡ršg
 &
bË
 = 
wÜklßd_
.
	`NextTabË
();

123 cÚ¡ 
¡d
::
¡ršg
 &
key
 = 
wÜklßd_
.
	`NextT¿n§ùiÚKey
();

124 
¡d
::
veùÜ
<
DB
::
KVPaœ
> 
v®ues
;

125 ià(
wÜklßd_
.
	`wr™e_®l_f›lds
()) {

126 
wÜklßd_
.
	`BudV®ues
(
v®ues
);

128 
wÜklßd_
.
	`BudUpd©e
(
v®ues
);

130  
db_
.
	`Upd©e
(
bË
, 
key
, 
v®ues
);

131 
	}
}

133 
šlše
 
	gCl›Á
::
	$T¿n§ùiÚIn£¹
() {

134 cÚ¡ 
¡d
::
¡ršg
 &
bË
 = 
wÜklßd_
.
	`NextTabË
();

135 cÚ¡ 
¡d
::
¡ršg
 &
key
 = 
wÜklßd_
.
	`NextSequ’ûKey
();

136 
¡d
::
veùÜ
<
DB
::
KVPaœ
> 
v®ues
;

137 
wÜklßd_
.
	`BudV®ues
(
v®ues
);

138  
db_
.
	`In£¹
(
bË
, 
key
, 
v®ues
);

139 
	}
}

	@coding.h

1 #iâdeà
YCSB_C_CODING_H_


2 
	#YCSB_C_CODING_H_


	)

4 
	~<¡dšt.h
>

5 
	~<¡ršg.h
>

6 
	~<¡ršg
>

8 
	#KL™eEndŸn
 
Œue


9 

	)

10 
šlše
 
	$EncodeFixed32
(* 
buf
, 
ušt32_t
 
v®ue
) {

11 ià(
KL™eEndŸn
) {

12 
	`memıy
(
buf
, &
v®ue
, (value));

14 
buf
[0] = 
v®ue
 & 0xff;

15 
buf
[1] = (
v®ue
 >> 8) & 0xff;

16 
buf
[2] = (
v®ue
 >> 16) & 0xff;

17 
buf
[3] = (
v®ue
 >> 24) & 0xff;

19 
	}
}

21 
šlše
 
	$EncodeFixed64
(* 
buf
, 
ušt64_t
 
v®ue
) {

22 ià(
KL™eEndŸn
) {

23 
	`memıy
(
buf
, &
v®ue
, (value));

25 
buf
[0] = 
v®ue
 & 0xff;

26 
buf
[1] = (
v®ue
 >> 8) & 0xff;

27 
buf
[2] = (
v®ue
 >> 16) & 0xff;

28 
buf
[3] = (
v®ue
 >> 24) & 0xff;

29 
buf
[4] = (
v®ue
 >> 32) & 0xff;

30 
buf
[5] = (
v®ue
 >> 40) & 0xff;

31 
buf
[6] = (
v®ue
 >> 48) & 0xff;

32 
buf
[7] = (
v®ue
 >> 56) & 0xff;

34 
	}
}

36 
šlše
 
ušt32_t
 
	$DecodeFixed32
(cÚ¡ * 
±r
) {

37 ià(
KL™eEndŸn
) {

39 
ušt32_t
 
»suÉ
;

40 
	`memıy
(&
»suÉ
, 
±r
, (result));

41  
»suÉ
;

43  ((
¡©ic_ÿ¡
<
ušt32_t
>(¡©ic_ÿ¡<>(
±r
[0])))

44 | (
¡©ic_ÿ¡
<
ušt32_t
>(¡©ic_ÿ¡<>(
±r
[1])) << 8)

45 | (
¡©ic_ÿ¡
<
ušt32_t
>(¡©ic_ÿ¡<>(
±r
[2])) << 16)

46 | (
¡©ic_ÿ¡
<
ušt32_t
>(¡©ic_ÿ¡<>(
±r
[3])) << 24));

48 
	}
}

50 
šlše
 
ušt64_t
 
	$DecodeFixed64
(cÚ¡ * 
±r
) {

51 ià(
KL™eEndŸn
) {

53 
ušt64_t
 
»suÉ
;

54 
	`memıy
(&
»suÉ
, 
±r
, (result));

55  
»suÉ
;

57 
ušt64_t
 
lo
 = 
	`DecodeFixed32
(
±r
);

58 
ušt64_t
 
hi
 = 
	`DecodeFixed32
(
±r
 + 4);

59  (
hi
 << 32è| 
lo
;

61 
	}
}

63 
šlše
 
	$PutFixed32
(
¡d
::
¡ršg
* 
d¡
, 
ušt32_t
 
v®ue
) {

64 
buf
[(
v®ue
)];

65 
	`EncodeFixed32
(
buf
, 
v®ue
);

66 
d¡
->
	`­³nd
(
buf
, (buf));

67 
	}
}

69 
šlše
 
	$PutFixed64
(
¡d
::
¡ršg
* 
d¡
, 
ušt64_t
 
v®ue
) {

70 
buf
[(
v®ue
)];

71 
	`EncodeFixed64
(
buf
, 
v®ue
);

72 
d¡
->
	`­³nd
(
buf
, (buf));

73 
	}
}

	@const_generator.h

9 #iâdeà
YCSB_C_CONST_GENERATOR_H_


10 
	#YCSB_C_CONST_GENERATOR_H_


	)

12 
	~"g’”©Ü.h
"

13 
	~<c¡dšt
>

15 
Çme¥aû
 
	gycsbc
 {

17 
şass
 
	gCÚ¡G’”©Ü
 : 
public
 
G’”©Ü
<
ušt64_t
> {

18 
public
:

19 
CÚ¡G’”©Ü
(
cÚ¡ªt
è: 
cÚ¡ªt_
(constant) { }

20 
ušt64_t
 
Next
(è{  
cÚ¡ªt_
; }

21 
ušt64_t
 
La¡
(è{  
	gcÚ¡ªt_
; }

22 
	g´iv©e
:

23 
ušt64_t
 
cÚ¡ªt_
;

	@core_workload.cc

9 
	~"ycsb/unifÜm_g’”©Ü.h
"

10 
	~"ycsb/zfŸn_g’”©Ü.h
"

11 
	~"ycsb/süambËd_zfŸn_g’”©Ü.h
"

12 
	~"ycsb/skewed_Ï‹¡_g’”©Ü.h
"

13 
	~"ycsb/cÚ¡_g’”©Ü.h
"

14 
	~"ycsb/cÜe_wÜklßd.h
"

16 
	~<¡ršg
>

18 
usšg
 
	gycsbc
::
CÜeWÜklßd
;

19 
usšg
 
	g¡d
::
¡ršg
;

21 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
OPT_FILE_PATH
 = "optfilepath";

22 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
OPT_FILE_PATH_DEFAULT
 = "";

24 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
TABLENAME_PROPERTY
 = "table";

25 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
TABLENAME_DEFAULT
 = "usertable";

27 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
KEY_LENGTH
 = "keylength";

28 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
KEY_LENGTH_DEFAULT
 = "16";

30 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
FIELD_COUNT_PROPERTY
 = "fieldcount";

31 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
FIELD_COUNT_DEFAULT
 = "10";

33 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
FIELD_LENGTH_DISTRIBUTION_PROPERTY
 =

35 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
FIELD_LENGTH_DISTRIBUTION_DEFAULT
 = "constant";

37 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
FIELD_LENGTH_PROPERTY
 = "fieldlength";

38 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
FIELD_LENGTH_DEFAULT
 = "100";

40 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
READ_ALL_FIELDS_PROPERTY
 = "readallfields";

41 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
READ_ALL_FIELDS_DEFAULT
 = "true";

43 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
WRITE_ALL_FIELDS_PROPERTY
 = "writeallfields";

44 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
WRITE_ALL_FIELDS_DEFAULT
 = "false";

46 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
READ_PROPORTION_PROPERTY
 = "readproportion";

47 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
READ_PROPORTION_DEFAULT
 = "0.95";

49 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
UPDATE_PROPORTION_PROPERTY
 = "updateproportion";

50 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
UPDATE_PROPORTION_DEFAULT
 = "0.05";

52 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
INSERT_PROPORTION_PROPERTY
 = "insertproportion";

53 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
INSERT_PROPORTION_DEFAULT
 = "0.0";

55 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
SCAN_PROPORTION_PROPERTY
 = "scanproportion";

56 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
SCAN_PROPORTION_DEFAULT
 = "0.0";

58 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
READMODIFYWRITE_PROPORTION_PROPERTY
 =

60 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
READMODIFYWRITE_PROPORTION_DEFAULT
 = "0.0";

62 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
REQUEST_DISTRIBUTION_PROPERTY
 =

64 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
REQUEST_DISTRIBUTION_DEFAULT
 = "uniform";

66 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
ZERO_PADDING_PROPERTY
 = "zeropadding";

67 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
ZERO_PADDING_DEFAULT
 = "1";

69 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
MAX_SCAN_LENGTH_PROPERTY
 = "maxscanlength";

70 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
MAX_SCAN_LENGTH_DEFAULT
 = "1000";

72 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
SCAN_LENGTH_DISTRIBUTION_PROPERTY
 =

74 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
SCAN_LENGTH_DISTRIBUTION_DEFAULT
 = "uniform";

76 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
INSERT_ORDER_PROPERTY
 = "insertorder";

77 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
INSERT_ORDER_DEFAULT
 = "hashed";

79 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
INSERT_START_PROPERTY
 = "insertstart";

80 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
INSERT_START_DEFAULT
 = "0";

82 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
RECORD_COUNT_PROPERTY
 = "recordcount";

83 cÚ¡ 
¡ršg
 
	gCÜeWÜklßd
::
OPERATION_COUNT_PROPERTY
 = "operationcount";

85 
	gCÜeWÜklßd
::
	$In™
(cÚ¡ 
uts
::
Prİ”t›s
 &
p
) {

86 
bË_Çme_
 = 
p
.
	`G‘Prİ”ty
(
TABLENAME_PROPERTY
,
TABLENAME_DEFAULT
);

87 
key_Ëngth_
 = 
¡d
::
	`¡oi
(
p
.
	`G‘Prİ”ty
(
KEY_LENGTH
, 
KEY_LENGTH_DEFAULT
));

88 
f›ld_couÁ_
 = 
¡d
::
	`¡oi
(
p
.
	`G‘Prİ”ty
(
FIELD_COUNT_PROPERTY
,

89 
FIELD_COUNT_DEFAULT
));

90 
f›ld_Ën_g’”©Ü_
 = 
	`G‘F›ldL’G’”©Ü
(
p
);

92 
»ad_´İÜtiÚ
 = 
¡d
::
	`¡od
(
p
.
	`G‘Prİ”ty
(
READ_PROPORTION_PROPERTY
,

93 
READ_PROPORTION_DEFAULT
));

94 
upd©e_´İÜtiÚ
 = 
¡d
::
	`¡od
(
p
.
	`G‘Prİ”ty
(
UPDATE_PROPORTION_PROPERTY
,

95 
UPDATE_PROPORTION_DEFAULT
));

96 
š£¹_´İÜtiÚ
 = 
¡d
::
	`¡od
(
p
.
	`G‘Prİ”ty
(
INSERT_PROPORTION_PROPERTY
,

97 
INSERT_PROPORTION_DEFAULT
));

98 
sÿn_´İÜtiÚ
 = 
¡d
::
	`¡od
(
p
.
	`G‘Prİ”ty
(
SCAN_PROPORTION_PROPERTY
,

99 
SCAN_PROPORTION_DEFAULT
));

100 
»admodifywr™e_´İÜtiÚ
 = 
¡d
::
	`¡od
(
p
.
	`G‘Prİ”ty
(

101 
READMODIFYWRITE_PROPORTION_PROPERTY
, 
READMODIFYWRITE_PROPORTION_DEFAULT
));

103 
»cÜd_couÁ_
 = 
¡d
::
	`¡oi
(
p
.
	`G‘Prİ”ty
(
RECORD_COUNT_PROPERTY
));

104 
¡d
::
¡ršg
 
»que¡_di¡
 = 
p
.
	`G‘Prİ”ty
(
REQUEST_DISTRIBUTION_PROPERTY
,

105 
REQUEST_DISTRIBUTION_DEFAULT
);

106 
z”o_·ddšg_
 = 
¡d
::
	`¡oi
(
p
.
	`G‘Prİ”ty
(
ZERO_PADDING_PROPERTY
, 
ZERO_PADDING_DEFAULT
));

107 
max_sÿn_Ën
 = 
¡d
::
	`¡oi
(
p
.
	`G‘Prİ”ty
(
MAX_SCAN_LENGTH_PROPERTY
,

108 
MAX_SCAN_LENGTH_DEFAULT
));

109 
¡d
::
¡ršg
 
sÿn_Ën_di¡
 = 
p
.
	`G‘Prİ”ty
(
SCAN_LENGTH_DISTRIBUTION_PROPERTY
,

110 
SCAN_LENGTH_DISTRIBUTION_DEFAULT
);

111 
š£¹_¡¬t
 = 
¡d
::
	`¡oi
(
p
.
	`G‘Prİ”ty
(
INSERT_START_PROPERTY
,

112 
INSERT_START_DEFAULT
));

114 
»ad_®l_f›lds_
 = 
uts
::
	`SŒToBoŞ
(
p
.
	`G‘Prİ”ty
(
READ_ALL_FIELDS_PROPERTY
,

115 
READ_ALL_FIELDS_DEFAULT
));

116 
wr™e_®l_f›lds_
 = 
uts
::
	`SŒToBoŞ
(
p
.
	`G‘Prİ”ty
(
WRITE_ALL_FIELDS_PROPERTY
,

117 
WRITE_ALL_FIELDS_DEFAULT
));

119 ià(
p
.
	`G‘Prİ”ty
(
INSERT_ORDER_PROPERTY
, 
INSERT_ORDER_DEFAULT
) == "hashed") {

120 
Üd”ed_š£¹s_
 = 
çl£
;

122 
Üd”ed_š£¹s_
 = 
Œue
;

125 
key_g’”©Ü_
 = 
Ãw
 
	`CouÁ”G’”©Ü
(
š£¹_¡¬t
);

127 ià(
»ad_´İÜtiÚ
 > 0) {

128 
İ_choo£r_
.
	`AddV®ue
(
READ
, 
»ad_´İÜtiÚ
);

130 ià(
upd©e_´İÜtiÚ
 > 0) {

131 
İ_choo£r_
.
	`AddV®ue
(
UPDATE
, 
upd©e_´İÜtiÚ
);

133 ià(
š£¹_´İÜtiÚ
 > 0) {

134 
İ_choo£r_
.
	`AddV®ue
(
INSERT
, 
š£¹_´İÜtiÚ
);

136 ià(
sÿn_´İÜtiÚ
 > 0) {

137 
İ_choo£r_
.
	`AddV®ue
(
SCAN
, 
sÿn_´İÜtiÚ
);

139 ià(
»admodifywr™e_´İÜtiÚ
 > 0) {

140 
İ_choo£r_
.
	`AddV®ue
(
READMODIFYWRITE
, 
»admodifywr™e_´İÜtiÚ
);

143 
š£¹_key_£qu’û_
.
	`S‘
(
»cÜd_couÁ_
);

145 ià(
»que¡_di¡
 == "uniform") {

146 
key_choo£r_
 = 
Ãw
 
	`UnifÜmG’”©Ü
(0, 
»cÜd_couÁ_
 - 1);

148 } ià(
»que¡_di¡
 == "zipfian") {

154 
İ_couÁ
 = 
¡d
::
	`¡oi
(
p
.
	`G‘Prİ”ty
(
OPERATION_COUNT_PROPERTY
));

155 
Ãw_keys
 = ()(
İ_couÁ
 * 
š£¹_´İÜtiÚ
 * 2);

156 
key_choo£r_
 = 
Ãw
 
	`SüambËdZfŸnG’”©Ü
(
»cÜd_couÁ_
 + 
Ãw_keys
);

158 } ià(
»que¡_di¡
 == "latest") {

159 
key_choo£r_
 = 
Ãw
 
	`SkewedL©e¡G’”©Ü
(
š£¹_key_£qu’û_
);

162 
throw
 
uts
::
	`Exû±iÚ
("UnknowÀ»que¡ di¡ributiÚ: " + 
»que¡_di¡
);

165 
f›ld_choo£r_
 = 
Ãw
 
	`UnifÜmG’”©Ü
(0, 
f›ld_couÁ_
 - 1);

167 ià(
sÿn_Ën_di¡
 == "uniform") {

168 
sÿn_Ën_choo£r_
 = 
Ãw
 
	`UnifÜmG’”©Ü
(1, 
max_sÿn_Ën
);

169 } ià(
sÿn_Ën_di¡
 == "zipfian") {

170 
sÿn_Ën_choo£r_
 = 
Ãw
 
	`ZfŸnG’”©Ü
(1, 
max_sÿn_Ën
);

172 
throw
 
uts
::
	`Exû±iÚ
("Distribution‚ot‡llowed for scan†ength: " +

173 
sÿn_Ën_di¡
);

175 
	}
}

177 
	gycsbc
::
G’”©Ü
<
ušt64_t
> *
CÜeWÜklßd
::
	$G‘F›ldL’G’”©Ü
(

178 cÚ¡ 
uts
::
Prİ”t›s
 &
p
) {

179 
¡ršg
 
f›ld_Ën_di¡
 = 
p
.
	`G‘Prİ”ty
(
FIELD_LENGTH_DISTRIBUTION_PROPERTY
,

180 
FIELD_LENGTH_DISTRIBUTION_DEFAULT
);

181 
f›ld_Ën
 = 
¡d
::
	`¡oi
(
p
.
	`G‘Prİ”ty
(
FIELD_LENGTH_PROPERTY
,

182 
FIELD_LENGTH_DEFAULT
));

183 if(
f›ld_Ën_di¡
 == "constant") {

184  
Ãw
 
	`CÚ¡G’”©Ü
(
f›ld_Ën
);

185 } if(
f›ld_Ën_di¡
 == "uniform") {

186  
Ãw
 
	`UnifÜmG’”©Ü
(1, 
f›ld_Ën
);

187 } if(
f›ld_Ën_di¡
 == "zipfian") {

188  
Ãw
 
	`ZfŸnG’”©Ü
(1, 
f›ld_Ën
);

190 
throw
 
uts
::
	`Exû±iÚ
("Unknown field†ength distribution: " +

191 
f›ld_Ën_di¡
);

193 
	}
}

195 
	gCÜeWÜklßd
::
BudV®ues
(
¡d
::
veùÜ
<
ycsbc
::
DB
::
KVPaœ
> &
v®ues
) {

196 
i
 = 0; 
	gi
 < 
	gf›ld_couÁ_
; ++i) {

197 
	gycsbc
::
DB
::
KVPaœ
 
·œ
;

198 
	g·œ
.
	gfœ¡
.
­³nd
("f›ld").­³nd(
¡d
::
to_¡ršg
(
i
));

199 
	g·œ
.
	g£cÚd
.
­³nd
(
f›ld_Ën_g’”©Ü_
->
Next
(), 
uts
::
RªdomPrštCh¬
());

200 
	gv®ues
.
push_back
(
·œ
);

204 
	gCÜeWÜklßd
::
BudUpd©e
(
¡d
::
veùÜ
<
ycsbc
::
DB
::
KVPaœ
> &
upd©e
) {

205 
ycsbc
::
DB
::
KVPaœ
 
·œ
;

206 
	g·œ
.
	gfœ¡
.
­³nd
(
NextF›ldName
());

207 
	g·œ
.
	g£cÚd
.
­³nd
(
f›ld_Ën_g’”©Ü_
->
Next
(), 
uts
::
RªdomPrštCh¬
());

208 
	gupd©e
.
push_back
(
·œ
);

	@core_workload.h

9 #iâdeà
YCSB_C_CORE_WORKLOAD_H_


10 
	#YCSB_C_CORE_WORKLOAD_H_


	)

12 
	~<veùÜ
>

13 
	~<¡ršg
>

14 
	~<c¡ršg
>

15 
	~"ycsb/db.h
"

16 
	~"ycsb/´İ”t›s.h
"

17 
	~"ycsb/g’”©Ü.h
"

18 
	~"ycsb/disü‘e_g’”©Ü.h
"

19 
	~"ycsb/couÁ”_g’”©Ü.h
"

20 
	~"ycsb/uts.h
"

22 
Çme¥aû
 
	gycsbc
 {

24 
	eO³¿tiÚ
 {

25 
	gINSERT
,

26 
	gREAD
,

27 
	gUPDATE
,

28 
	gSCAN
,

29 
	gREADMODIFYWRITE


32 şas 
	cCÜeWÜklßd
 {

33 
	gpublic
:

35 cÚ¡ 
¡d
::
¡ršg
 
OPT_FILE_PATH
;

36 cÚ¡ 
	g¡d
::
¡ršg
 
OPT_FILE_PATH_DEFAULT
;

41 cÚ¡ 
	g¡d
::
¡ršg
 
TABLENAME_PROPERTY
;

42 cÚ¡ 
	g¡d
::
¡ršg
 
TABLENAME_DEFAULT
;

47 cÚ¡ 
	g¡d
::
¡ršg
 
FIELD_COUNT_PROPERTY
;

48 cÚ¡ 
	g¡d
::
¡ršg
 
FIELD_COUNT_DEFAULT
;

50 cÚ¡ 
	g¡d
::
¡ršg
 
KEY_LENGTH
;

51 cÚ¡ 
	g¡d
::
¡ršg
 
KEY_LENGTH_DEFAULT
;

57 cÚ¡ 
	g¡d
::
¡ršg
 
FIELD_LENGTH_DISTRIBUTION_PROPERTY
;

58 cÚ¡ 
	g¡d
::
¡ršg
 
FIELD_LENGTH_DISTRIBUTION_DEFAULT
;

63 cÚ¡ 
	g¡d
::
¡ršg
 
FIELD_LENGTH_PROPERTY
;

64 cÚ¡ 
	g¡d
::
¡ršg
 
FIELD_LENGTH_DEFAULT
;

70 cÚ¡ 
	g¡d
::
¡ršg
 
READ_ALL_FIELDS_PROPERTY
;

71 cÚ¡ 
	g¡d
::
¡ršg
 
READ_ALL_FIELDS_DEFAULT
;

77 cÚ¡ 
	g¡d
::
¡ršg
 
WRITE_ALL_FIELDS_PROPERTY
;

78 cÚ¡ 
	g¡d
::
¡ršg
 
WRITE_ALL_FIELDS_DEFAULT
;

83 cÚ¡ 
	g¡d
::
¡ršg
 
READ_PROPORTION_PROPERTY
;

84 cÚ¡ 
	g¡d
::
¡ršg
 
READ_PROPORTION_DEFAULT
;

89 cÚ¡ 
	g¡d
::
¡ršg
 
UPDATE_PROPORTION_PROPERTY
;

90 cÚ¡ 
	g¡d
::
¡ršg
 
UPDATE_PROPORTION_DEFAULT
;

95 cÚ¡ 
	g¡d
::
¡ršg
 
INSERT_PROPORTION_PROPERTY
;

96 cÚ¡ 
	g¡d
::
¡ršg
 
INSERT_PROPORTION_DEFAULT
;

101 cÚ¡ 
	g¡d
::
¡ršg
 
SCAN_PROPORTION_PROPERTY
;

102 cÚ¡ 
	g¡d
::
¡ršg
 
SCAN_PROPORTION_DEFAULT
;

108 cÚ¡ 
	g¡d
::
¡ršg
 
READMODIFYWRITE_PROPORTION_PROPERTY
;

109 cÚ¡ 
	g¡d
::
¡ršg
 
READMODIFYWRITE_PROPORTION_DEFAULT
;

115 cÚ¡ 
	g¡d
::
¡ršg
 
REQUEST_DISTRIBUTION_PROPERTY
;

116 cÚ¡ 
	g¡d
::
¡ršg
 
REQUEST_DISTRIBUTION_DEFAULT
;

122 cÚ¡ 
	g¡d
::
¡ršg
 
ZERO_PADDING_PROPERTY
;

123 cÚ¡ 
	g¡d
::
¡ršg
 
ZERO_PADDING_DEFAULT
;

128 cÚ¡ 
	g¡d
::
¡ršg
 
MAX_SCAN_LENGTH_PROPERTY
;

129 cÚ¡ 
	g¡d
::
¡ršg
 
MAX_SCAN_LENGTH_DEFAULT
;

135 cÚ¡ 
	g¡d
::
¡ršg
 
SCAN_LENGTH_DISTRIBUTION_PROPERTY
;

136 cÚ¡ 
	g¡d
::
¡ršg
 
SCAN_LENGTH_DISTRIBUTION_DEFAULT
;

142 cÚ¡ 
	g¡d
::
¡ršg
 
INSERT_ORDER_PROPERTY
;

143 cÚ¡ 
	g¡d
::
¡ršg
 
INSERT_ORDER_DEFAULT
;

145 cÚ¡ 
	g¡d
::
¡ršg
 
INSERT_START_PROPERTY
;

146 cÚ¡ 
	g¡d
::
¡ršg
 
INSERT_START_DEFAULT
;

148 cÚ¡ 
	g¡d
::
¡ršg
 
RECORD_COUNT_PROPERTY
;

149 cÚ¡ 
	g¡d
::
¡ršg
 
OPERATION_COUNT_PROPERTY
;

155 
vœtu®
 
In™
(cÚ¡ 
uts
::
Prİ”t›s
 &
p
);

157 
vœtu®
 
BudV®ues
(
¡d
::
veùÜ
<
ycsbc
::
DB
::
KVPaœ
> &
v®ues
);

158 
vœtu®
 
BudUpd©e
(
¡d
::
veùÜ
<
ycsbc
::
DB
::
KVPaœ
> &
upd©e
);

160 
vœtu®
 
	g¡d
::
¡ršg
 
BudMaxKey
();

162 
vœtu®
 
	g¡d
::
¡ršg
 
NextTabË
(è{  
bË_Çme_
; }

163 
vœtu®
 
	g¡d
::
¡ršg
 
NextSequ’ûKey
();

164 
vœtu®
 
	g¡d
::
¡ršg
 
NextT¿n§ùiÚKey
();

165 
vœtu®
 
NextT¿n§ùiÚSÿnKey
(
¡d
::
¡ršg
 &
¡¬t_key
, std::¡ršg &
’d_key
);

166 
vœtu®
 
O³¿tiÚ
 
NextO³¿tiÚ
(è{  
	gİ_choo£r_
.
Next
(); }

167 
vœtu®
 
	g¡d
::
¡ršg
 
NextF›ldName
();

168 
vœtu®
 
size_t
 
NextSÿnL’gth
(è{  
	gsÿn_Ën_choo£r_
->
Next
(); }

170 
boŞ
 
»ad_®l_f›lds
(ècÚ¡ {  
	g»ad_®l_f›lds_
; }

171 
boŞ
 
wr™e_®l_f›lds
(ècÚ¡ {  
	gwr™e_®l_f›lds_
; }

173 
CÜeWÜklßd
() :

174 
key_Ëngth_
(16), 
f›ld_couÁ_
(0), 
»ad_®l_f›lds_
(
çl£
), 
wr™e_®l_f›lds_
(false),

175 
f›ld_Ën_g’”©Ü_
(
NULL
), 
key_g’”©Ü_
(NULL), 
key_choo£r_
(NULL),

176 
f›ld_choo£r_
(
NULL
), 
sÿn_Ën_choo£r_
(NULL), 
š£¹_key_£qu’û_
(3),

177 
Üd”ed_š£¹s_
(
Œue
), 
»cÜd_couÁ_
(0) {

180 
	gvœtu®
 ~
CÜeWÜklßd
() {

181 ià(
	gf›ld_Ën_g’”©Ü_
è
d–‘e
 field_len_generator_;

182 ià(
	gkey_g’”©Ü_
è
d–‘e
 key_generator_;

183 ià(
	gkey_choo£r_
è
d–‘e
 key_chooser_;

184 ià(
	gf›ld_choo£r_
è
d–‘e
 field_chooser_;

185 ià(
	gsÿn_Ën_choo£r_
è
d–‘e
 scan_len_chooser_;

188 
	g´Ùeùed
:

189 
G’”©Ü
<
ušt64_t
> *
G‘F›ldL’G’”©Ü
(cÚ¡ 
uts
::
Prİ”t›s
 &
p
);

190 
	g¡d
::
¡ršg
 
BudKeyName
(
ušt64_t
 
key_num
);

192 
	g¡d
::
¡ršg
 
bË_Çme_
;

193 
	gkey_Ëngth_
;

194 
	gf›ld_couÁ_
;

195 
boŞ
 
	g»ad_®l_f›lds_
;

196 
boŞ
 
	gwr™e_®l_f›lds_
;

197 
	gG’”©Ü
<
	gušt64_t
> *
	gf›ld_Ën_g’”©Ü_
;

198 
	gG’”©Ü
<
	gušt64_t
> *
	gkey_g’”©Ü_
;

199 
	gDisü‘eG’”©Ü
<
	gO³¿tiÚ
> 
	gİ_choo£r_
;

200 
	gG’”©Ü
<
	gušt64_t
> *
	gkey_choo£r_
;

201 
	gG’”©Ü
<
	gušt64_t
> *
	gf›ld_choo£r_
;

202 
	gG’”©Ü
<
	gušt64_t
> *
	gsÿn_Ën_choo£r_
;

203 
CouÁ”G’”©Ü
 
	gš£¹_key_£qu’û_
;

204 
boŞ
 
	gÜd”ed_š£¹s_
;

205 
size_t
 
	g»cÜd_couÁ_
;

206 
	gz”o_·ddšg_
;

207 
	gmax_sÿn_Ën_
;

210 
šlše
 
	g¡d
::
¡ršg
 
CÜeWÜklßd
::
	$NextSequ’ûKey
() {

211 
ušt64_t
 
key_num
 = 
key_g’”©Ü_
->
	`Next
();

212  
	`BudKeyName
(
key_num
);

213 
	}
}

215 
šlše
 
	g¡d
::
¡ršg
 
CÜeWÜklßd
::
	$NextT¿n§ùiÚKey
() {

216 
ušt64_t
 
key_num
;

218 
key_num
 = 
key_choo£r_
->
	`Next
();

219 } 
key_num
 > 
š£¹_key_£qu’û_
.
	`La¡
());

220  
	`BudKeyName
(
key_num
);

221 
	}
}

223 
šlše
 
	gCÜeWÜklßd
::
	$NextT¿n§ùiÚSÿnKey
(
¡d
::
¡ršg
 &
¡¬t_key
, std::¡ršg &
’d_key
) {

224 
ušt64_t
 
key_num
;

226 
key_num
 = 
key_choo£r_
->
	`Next
();

227 } 
key_num
 > 
š£¹_key_£qu’û_
.
	`La¡
());

228 
¡¬t_key
 = 
	`BudKeyName
(
key_num
);

230 
’d_key
 = 
¡¬t_key
;

231 
šdex
 = 
	`log10
(
»cÜd_couÁ_
 / 
max_sÿn_Ën_
);

232 
šdex
 = (index - 2) > 0 ? index - 2 : 0;

233 
’d_key
[
šdex
]++;

234 
	}
}

236 
šlše
 
	g¡d
::
¡ršg
 
CÜeWÜklßd
::
	$BudKeyName
(
ušt64_t
 
key_num
) {

237 ià(!
Üd”ed_š£¹s_
) {

238 
key_num
 = 
uts
::
	`Hash
(key_num);

240 
key_buff
[
key_Ëngth_
 + 1];

241 
	`¥rštf
(
key_buff
, "%0*lx", 
key_Ëngth_
, 
key_num
);

242  
¡d
::
	`¡ršg
(
key_buff
, 
key_Ëngth_
);

247 
	}
}

249 
šlše
 
	g¡d
::
¡ršg
 
CÜeWÜklßd
::
	$BudMaxKey
() {

250 
key_buff
[
key_Ëngth_
 + 1];

251 
	`mem£t
(
key_buff
, 0xff, 
key_Ëngth_
);

252  
¡d
::
	`¡ršg
(
key_buff
, 
key_Ëngth_
);

253 
	}
}

255 
šlše
 
	g¡d
::
¡ršg
 
CÜeWÜklßd
::
	$NextF›ldName
() {

256  
¡d
::
	`¡ršg
("f›ld").
	`­³nd
(¡d::
	`to_¡ršg
(
f›ld_choo£r_
->
	`Next
()));

257 
	}
}

	@counter_generator.h

9 #iâdeà
YCSB_C_COUNTER_GENERATOR_H_


10 
	#YCSB_C_COUNTER_GENERATOR_H_


	)

12 
	~"g’”©Ü.h
"

14 
	~<c¡dšt
>

15 
	~<©omic
>

17 
Çme¥aû
 
	gycsbc
 {

19 
şass
 
	gCouÁ”G’”©Ü
 : 
public
 
G’”©Ü
<
ušt64_t
> {

20 
public
:

21 
CouÁ”G’”©Ü
(
ušt64_t
 
¡¬t
è: 
couÁ”_
(start) { }

22 
ušt64_t
 
Next
(è{  
couÁ”_
.
ãtch_add
(1); }

23 
ušt64_t
 
La¡
(è{  
	gcouÁ”_
.
lßd
() - 1; }

24 
S‘
(
ušt64_t
 
¡¬t
è{ 
	gcouÁ”_
.
¡Üe
(start); }

25 
	g´iv©e
:

26 
¡d
::
©omic
<
ušt64_t
> 
couÁ”_
;

	@db.h

9 #iâdeà
YCSB_C_DB_H_


10 
	#YCSB_C_DB_H_


	)

12 
	~<veùÜ
>

13 
	~<¡ršg
>

15 
Çme¥aû
 
	gycsbc
 {

17 şas 
	cDB
 {

18 
	gpublic
:

19 
¡d
::
	t·œ
<
	t¡d
::
	t¡ršg
, std::¡ršg> 
	tKVPaœ
;

20 cÚ¡ 
	gkOK
 = 0;

21 cÚ¡ 
	gkE¼ÜNoD©a
 = 1;

22 cÚ¡ 
	gkE¼ÜCÚæiù
 = 2;

27 
vœtu®
 
In™
() { }

32 
vœtu®
 
Clo£
() { }

43 
vœtu®
 
R—d
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
,

44 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> *
f›lds
,

45 
¡d
::
veùÜ
<
KVPaœ
> &
»suÉ
) = 0;

58 
vœtu®
 
Sÿn
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
,

59 
»cÜd_couÁ
, cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> *
f›lds
,

60 
¡d
::
veùÜ
<¡d::veùÜ<
KVPaœ
>> &
»suÉ
) = 0;

71 
vœtu®
 
Upd©e
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
,

72 
¡d
::
veùÜ
<
KVPaœ
> &
v®ues
) = 0;

82 
vœtu®
 
In£¹
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
,

83 
¡d
::
veùÜ
<
KVPaœ
> &
v®ues
) = 0;

91 
vœtu®
 
D–‘e
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
) = 0;

93 
	gvœtu®
 ~
DB
() { }

	@db_factory.cc

2 
	~"ycsb/db_çùÜy.h
"

3 
	~<¡ršg
>

4 
	~"ycsb/basic_db.h
"

5 
	~"ycsb/rocksdb_db.h
"

7 
usšg
 
	gycsbc
::
DB
;

8 
usšg
 
	gycsbc
::
DBFaùÜy
;

10 
DB
* 
	gDBFaùÜy
::
	$C»©eDB
(
uts
::
Prİ”t›s
 &
´İs
) {

12 ià(
´İs
["dbname"] == "basic") {

13  
Ãw
 
BasicDB
;

14 } ià(
´İs
["dbname"] == "rocksdb") {

15 
¡d
::
¡ršg
 
db·th
 = 
´İs
.
	`G‘Prİ”ty
("dbpath","/tmp/test-rocksdb");

16  
Ãw
 
	`RocksDB
(
db·th
.
	`c_¡r
(), 
´İs
);

20  
NULL
;

22 
	}
}

	@db_factory.h

1 #iâdeà
YCSB_C_DB_FACTORY_H_


2 
	#YCSB_C_DB_FACTORY_H_


	)

4 
	~"ycsb/db.h
"

5 
	~"ycsb/´İ”t›s.h
"

7 
Çme¥aû
 
	gycsbc
 {

9 şas 
	cDBFaùÜy
 {

10 
	gpublic
:

11 
DB
* 
C»©eDB
(
uts
::
Prİ”t›s
 &
´İs
);

	@discrete_generator.h

9 #iâdeà
YCSB_C_DISCRETE_GENERATOR_H_


10 
	#YCSB_C_DISCRETE_GENERATOR_H_


	)

12 
	~"g’”©Ü.h
"

14 
	~<©omic
>

15 
	~<ÿs£¹
>

16 
	~<mu‹x
>

17 
	~<veùÜ
>

18 
	~"uts.h
"

20 
Çme¥aû
 
	gycsbc
 {

22 
	g‹m¶©e
 <
ty³Çme
 
	gV®ue
>

23 
şass
 
	gDisü‘eG’”©Ü
 : 
public
 
G’”©Ü
<
V®ue
> {

24 
public
:

25 
Disü‘eG’”©Ü
(è: 
sum_
(0) { }

26 
AddV®ue
(
V®ue
 
v®ue
, 
weight
);

28 
V®ue
 
Next
();

29 
V®ue
 
La¡
(è{  
	gÏ¡_
; }

31 
	g´iv©e
:

32 
¡d
::
veùÜ
<¡d::
·œ
<
V®ue
, >> 
	gv®ues_
;

33 
	gsum_
;

34 
	g¡d
::
©omic
<
V®ue
> 
Ï¡_
;

35 
	g¡d
::
mu‹x
 
mu‹x_
;

38 
	g‹m¶©e
 <
ty³Çme
 
	gV®ue
>

39 
šlše
 
	gDisü‘eG’”©Ü
<
	gV®ue
>::
AddV®ue
(
V®ue
 
v®ue
, 
weight
) {

40 ià(
	gv®ues_
.
em±y
()) {

41 
	gÏ¡_
 = 
v®ue
;

43 
	gv®ues_
.
push_back
(
¡d
::
make_·œ
(
v®ue
, 
weight
));

44 
	gsum_
 +ğ
weight
;

47 
	g‹m¶©e
 <
ty³Çme
 
	gV®ue
>

48 
šlše
 
V®ue
 
	gDisü‘eG’”©Ü
<
	gV®ue
>::
Next
() {

49 
mu‹x_
.
lock
();

50 
	gchoo£r
 = 
uts
::
RªdomDoubË
();

51 
	gmu‹x_
.
uÆock
();

53 autØ
	gp
 = 
v®ues_
.
cbegš
();… !ğv®ues_.
ûnd
(); ++p) {

54 ià(
	gchoo£r
 < 
	gp
->
	g£cÚd
 / 
	gsum_
) {

55  
	gÏ¡_
 = 
p
->
fœ¡
;

57 
	gchoo£r
 -ğ
p
->
£cÚd
 / 
sum_
;

60 
as£¹
(
çl£
);

61  
	gÏ¡_
;

	@generator.h

9 #iâdeà
YCSB_C_GENERATOR_H_


10 
	#YCSB_C_GENERATOR_H_


	)

12 
	~<c¡dšt
>

13 
	~<¡ršg
>

15 
Çme¥aû
 
	gycsbc
 {

17 
	g‹m¶©e
 <
ty³Çme
 
	gV®ue
>

18 şas 
	cG’”©Ü
 {

19 
	gpublic
:

20 
vœtu®
 
V®ue
 
Next
() = 0;

21 
vœtu®
 
V®ue
 
La¡
() = 0;

22 
	gvœtu®
 ~
G’”©Ü
() { }

	@properties.h

9 #iâdeà
YCSB_C_PROPERTIES_H_


10 
	#YCSB_C_PROPERTIES_H_


	)

12 
	~<¡ršg
>

13 
	~<m­
>

14 
	~<f¡»am
>

15 
	~<ÿs£¹
>

16 
	~"uts.h
"

18 
Çme¥aû
 
	guts
 {

20 şas 
	cPrİ”t›s
 {

21 
	gpublic
:

22 
¡d
::
¡ršg
 
G‘Prİ”ty
(cÚ¡ std::¡ršg &
key
,

23 cÚ¡ 
¡d
::
¡ršg
 &
deçuÉ_v®ue
 = std::string()) const;

24 cÚ¡ 
	g¡d
::
¡ršg
 &
İ”©Ü
[](cÚ¡ 
¡d
::¡ršg &
key
) const;

25 cÚ¡ 
	g¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg> &
´İ”t›s
() const;

27 
S‘Prİ”ty
(cÚ¡ 
¡d
::
¡ršg
 &
key
, cÚ¡ std::¡ršg &
v®ue
);

28 
boŞ
 
Lßd
(
¡d
::
if¡»am
 &
šput
);

29 
	g´iv©e
:

30 
¡d
::
m­
<¡d::
¡ršg
, 
	g¡d
::¡ršg> 
´İ”t›s_
;

33 
šlše
 
	g¡d
::
¡ršg
 
Prİ”t›s
::
	$G‘Prİ”ty
(cÚ¡ 
¡d
::
¡ršg
 &
key
,

34 cÚ¡ 
¡d
::
¡ršg
 &
deçuÉ_v®ue
) const {

35 
¡d
::
m­
<¡d::
¡ršg
, std::¡ršg>::
cÚ¡_™”©Ü
 
™
 = 
´İ”t›s_
.
	`fšd
(
key
);

36 ià(
´İ”t›s_
.
	`’d
(è=ğ
™
) {

37  
deçuÉ_v®ue
;

38 }  
™
->
£cÚd
;

39 
	}
}

41 
šlše
 cÚ¡ 
	g¡d
::
¡ršg
 &
Prİ”t›s
::
İ”©Ü
[](cÚ¡ 
¡d
::¡ršg &
key
) const {

42  
´İ”t›s_
.
©
(
key
);

45 
šlše
 cÚ¡ 
	g¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg> &
Prİ”t›s
::
	$´İ”t›s
() const {

46  
´İ”t›s_
;

47 
	}
}

49 
šlše
 
	gPrİ”t›s
::
	$S‘Prİ”ty
(cÚ¡ 
¡d
::
¡ršg
 &
key
,

50 cÚ¡ 
¡d
::
¡ršg
 &
v®ue
) {

51 
´İ”t›s_
[
key
] = 
v®ue
;

52 
	}
}

54 
šlše
 
boŞ
 
	gPrİ”t›s
::
	$Lßd
(
¡d
::
if¡»am
 &
šput
) {

55 ià(!
šput
.
	`is_İ’
()è
throw
 
uts
::
	`Exû±iÚ
("File‚ot open!");

57 !
šput
.
	`eof
(è&& !šput.
	`bad
()) {

58 
¡d
::
¡ršg
 
lše
;

59 
¡d
::
	`g‘lše
(
šput
, 
lše
);

60 ià(
lše
[0] == '#') ;

61 
size_t
 
pos
 = 
lše
.
	`fšd_fœ¡_of
('=');

62 ià(
pos
 =ğ
¡d
::
¡ršg
::
Åos
) ;

63 
	`S‘Prİ”ty
(
	`Trim
(
lše
.
	`sub¡r
(0, 
pos
)), Trim(line.substr(pos + 1)));

65  
Œue
;

66 
	}
}

	@rocksdb_db.cc

1 
	~<io¡»am
>

3 
	~"rocksdb_db.h
"

4 
	~<rocksdb/fe_sy¡em.h
>

5 
	~"codšg.h
"

7 
usšg
 
	gROCKSDB_NAMESPACE
::
BlockBa£dTabËO±iÚs
;

8 
usšg
 
	gROCKSDB_NAMESPACE
::
CŞumnFamyDesütÜ
;

9 
usšg
 
	gROCKSDB_NAMESPACE
::
CŞumnFamyHªdË
;

10 
usšg
 
	gROCKSDB_NAMESPACE
::
CŞumnFamyO±iÚs
;

11 
usšg
 
	gROCKSDB_NAMESPACE
::
Com·ùiÚF‹r
;

12 
usšg
 
	gROCKSDB_NAMESPACE
::
CÚfigO±iÚs
;

13 
usšg
 
	gROCKSDB_NAMESPACE
::
DB
;

14 
usšg
 
	gROCKSDB_NAMESPACE
::
DBO±iÚs
;

15 
usšg
 
	gROCKSDB_NAMESPACE
::
NewLRUCache
;

16 
usšg
 
	gROCKSDB_NAMESPACE
::
O±iÚs
;

17 
usšg
 
	gROCKSDB_NAMESPACE
::
Sliû
;

18 
usšg
 
	gROCKSDB_NAMESPACE
::
Stus
;

19 
usšg
 
	gROCKSDB_NAMESPACE
::
Env
;

21 
Çme¥aû
 
	gycsbc
 {

23 
	gRocksDB
::
RocksDB
(cÚ¡ *
dbf’ame
, 
uts
::
Prİ”t›s
 &
´İs
)

24 :
noResuÉ
(0), 
ÿche_
(
nuÎ±r
), 
db¡©s_
ÒuÎ±r), 
wr™e_sync_
(
çl£
) {

27 
	grocksdb
::
O±iÚs
 
İtiÚs
;

28 
S‘O±iÚs
(&
İtiÚs
, 
´İs
, 
zns
);

30 
	g¡d
::
û¼
 << "open„ocksdb 1\n";

31 
	grocksdb
::
Stus
 
s
 = 
rocksdb
::
DB
::
O³n
(
İtiÚs
, 
dbf’ame
, &
db_
);

32 
	g¡d
::
û¼
 << "open„ocksdb 2\n";

34 if(!
	gs
.
ok
()){

35 
	g¡d
::
û¼
<<"Cª'ˆİ’„ocksdb "<<
dbf’ame
<<" "<<
s
.
ToSŒšg
()<<
¡d
::
’dl
;

36 
ex™
(0);

41 
	gRocksDB
::
S‘O±iÚs
(
rocksdb
::
O±iÚs
 *
İtiÚs
, 
uts
::
Prİ”t›s
 &
´İs
, 
boŞ
 
zns
) {

43 
´štf
("Initializing RocksDB Options fromhe specified file\n");

44 
	g¡d
::
¡ršg
 
İtiÚs_fe
 = 
´İs
.
G‘Prİ”ty
(
CÜeWÜklßd
::
OPT_FILE_PATH
);

46 ià(
	gzns
) {

49 
	g’v
 = 
Env
::
DeçuÉ
();

52 
	gİtiÚs
->
	g’v
 = 
’v
;

54 
DBO±iÚs
 
	gdb_İts
;

55 
	g¡d
::
veùÜ
<
CŞumnFamyDesütÜ
> 
cf_descs
;

57 ià(
	gİtiÚs_fe
 != "") {

58 autØ
s
 = 
LßdO±iÚsFromFe
(
İtiÚs_fe
, 
’v
, &
db_İts
,

59 &
cf_descs
);

60 
	gdb_İts
.
	g’v
 = 
’v
;

61 ià(
	gs
.
ok
()) {

62 *
	gİtiÚs
 = 
O±iÚs
(
db_İts
, 
cf_descs
[0].
İtiÚs
);

66 
	gİtiÚs
->
	gü—‹_if_missšg
 = 
Œue
;

67 
	gİtiÚs
->
	gcom´essiÚ
 = 
rocksdb
::
kNoCom´essiÚ
;

68 
	gİtiÚs
->
	gmax_background_jobs
 = 2;

69 
	gİtiÚs
->
	gmax_by‹s_fÜ_Ëv–_ba£
 = 32ul * 1024 * 1024;

70 
	gİtiÚs
->
	gwr™e_bufãr_size
 = 32ul * 1024 * 1024;

71 
	gİtiÚs
->
	gmax_wr™e_bufãr_numb”
 = 2;

72 
	gİtiÚs
->
	grg‘_fe_size_ba£
 = 4ul * 1024 * 1024;

74 
	gİtiÚs
->
	gËv–0_fe_num_com·ùiÚ_Œigg”
 = 4;

75 
	gİtiÚs
->
	gËv–0_¦owdown_wr™es_Œigg”
 = 8;

76 
	gİtiÚs
->
	gËv–0_¡İ_wr™es_Œigg”
 = 12;

78 
	gİtiÚs
->
	gu£_dœeù_»ads
 = 
Œue
;

79 
	gİtiÚs
->
	gu£_dœeù_io_fÜ_æush_ªd_com·ùiÚ
 = 
Œue
;

81 
ušt64_t
 
	gnums
 = 
¡d
::
¡oi
(
´İs
.
G‘Prİ”ty
(
CÜeWÜklßd
::
RECORD_COUNT_PROPERTY
));

82 
ušt32_t
 
	gkey_Ën
 = 
¡d
::
¡oi
(
´İs
.
G‘Prİ”ty
(
CÜeWÜklßd
::
KEY_LENGTH
, CÜeWÜklßd::
KEY_LENGTH_DEFAULT
));

83 
ušt32_t
 
	gv®ue_Ën
 = 
¡d
::
¡oi
(
´İs
.
G‘Prİ”ty
(
CÜeWÜklßd
::
FIELD_LENGTH_PROPERTY
, CÜeWÜklßd::
FIELD_LENGTH_DEFAULT
));

84 
ušt32_t
 
	gÿche_size
 = 
nums
 * (
key_Ën
 + 
v®ue_Ën
) * 10 / 100;

85 if(
	gÿche_size
 < 8 << 20) {

86 
	gÿche_size
 = 8 << 20;

88 
	gÿche_
 = 
rocksdb
::
NewLRUCache
(
ÿche_size
);

90 
boŞ
 
	g¡©i¡ics
 = 
uts
::
SŒToBoŞ
(
´İs
["dbstatistics"]);

91 if(
	g¡©i¡ics
){

92 
	gdb¡©s_
 = 
rocksdb
::
C»©eDBSti¡ics
();

93 
	gİtiÚs
->
	g¡©i¡ics
 = 
db¡©s_
;

96 
	gwr™e_sync_
 = 
çl£
;

101 
	gRocksDB
::
R—d
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
, cÚ¡ std::
veùÜ
<¡d::¡ršg> *
f›lds
,

102 
¡d
::
veùÜ
<
KVPaœ
> &
»suÉ
) {

103 
¡d
::
¡ršg
 
v®ue
;

104 
	grocksdb
::
Stus
 
s
 = 
db_
->
G‘
(
rocksdb
::
R—dO±iÚs
(),
key
,&
v®ue
);

105 if(
	gs
.
ok
()) {

107 
DeS”ŸlizeV®ues
(
v®ue
, 
»suÉ
);

112  
	gDB
::
kOK
;

114 if(
	gs
.
IsNÙFound
()){

115 
	gnoResuÉ
++;

117  
	gDB
::
kOK
;

119 
	g¡d
::
û¼
<<"»adƒ¼Ü"<<
¡d
::
’dl
;

120 
ex™
(0);

125 
	gRocksDB
::
Sÿn
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
, cÚ¡ std::¡ršg &
max_key
, 
Ën
, cÚ¡ std::
veùÜ
<¡d::¡ršg> *
f›lds
,

126 
¡d
::
veùÜ
<¡d::veùÜ<
KVPaœ
>> &
»suÉ
) {

127 autØ
™
=
db_
->
NewI‹¿tÜ
(
rocksdb
::
R—dO±iÚs
());

128 
	g™
->
S“k
(
key
);

129 
	g¡d
::
¡ršg
 
v®
;

130 
	g¡d
::
¡ršg
 
k
;

131 
	gi
=0;˜< 
	gËn
 && 
	g™
->
V®id
(); i++){

132 
	gk
 = 
™
->
key
().
ToSŒšg
();

133 
	gv®
 = 
™
->
v®ue
().
ToSŒšg
();

134 
	g™
->
Next
();

136 
d–‘e
 
	g™
;

137  
	gDB
::
kOK
;

140 
	gRocksDB
::
Sÿn
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
, 
Ën
, cÚ¡ std::
veùÜ
<¡d::¡ršg> *
f›lds
,

141 
¡d
::
veùÜ
<¡d::veùÜ<
KVPaœ
>> &
»suÉ
) {

142 autØ
™
=
db_
->
NewI‹¿tÜ
(
rocksdb
::
R—dO±iÚs
());

143 
	g™
->
S“k
(
key
);

144 
	g¡d
::
¡ršg
 
v®
;

145 
	g¡d
::
¡ršg
 
k
;

146 
	gi
=0;˜< 
	gËn
 && 
	g™
->
V®id
(); i++){

147 
	gk
 = 
™
->
key
().
ToSŒšg
();

148 
	gv®
 = 
™
->
v®ue
().
ToSŒšg
();

149 
	g™
->
Next
();

151 
d–‘e
 
	g™
;

152  
	gDB
::
kOK
;

156 
	gRocksDB
::
In£¹
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
,

157 
¡d
::
veùÜ
<
KVPaœ
> &
v®ues
){

158 
rocksdb
::
Stus
 
s
;

159 
	g¡d
::
¡ršg
 
v®ue
;

160 
S”ŸlizeV®ues
(
v®ues
,
v®ue
);

161 
	grocksdb
::
Wr™eO±iÚs
 
wr™e_İtiÚs
 = 
rocksdb
::WriteOptions();

163 if(
	gwr™e_sync_
) {

164 
	gwr™e_İtiÚs
.
	gsync
 = 
Œue
;

167 
	gs
 = 
db_
->
Put
(
wr™e_İtiÚs
, 
key
, 
v®ue
);

169 if(!
	gs
.
ok
()){

170 
	g¡d
::
û¼
<<"š£¹ƒ¼Ü\n"<<
¡d
::
’dl
;

171 
ex™
(0);

174  
	gDB
::
kOK
;

177 
	gRocksDB
::
Upd©e
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
, std::
veùÜ
<
KVPaœ
> &
v®ues
) {

178  
In£¹
(
bË
,
key
,
v®ues
);

181 
	gRocksDB
::
D–‘e
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
) {

182 
rocksdb
::
Stus
 
s
;

183 
	grocksdb
::
Wr™eO±iÚs
 
wr™e_İtiÚs
 = 
rocksdb
::WriteOptions();

184 if(
	gwr™e_sync_
) {

185 
	gwr™e_İtiÚs
.
	gsync
 = 
Œue
;

187 
	gs
 = 
db_
->
D–‘e
(
wr™e_İtiÚs
,
key
);

188 if(!
	gs
.
ok
()){

189 
	g¡d
::
û¼
<<"D–‘”rÜ\n"<<
¡d
::
’dl
;

190 
ex™
(0);

192  
	gDB
::
kOK
;

195 
	gRocksDB
::
PrštSts
() {

196 if(
noResuÉ
è
¡d
::
cout
<<"»ad‚Ù found:"<<noResuÉ<<¡d::
’dl
;

197 
	g¡d
::
¡ršg
 
¡©s
;

198 
	gdb_
->
G‘Prİ”ty
("rocksdb.¡©s",&
¡©s
);

199 
	g¡d
::
cout
<<
¡©s
<<
¡d
::
’dl
;

201 ià(
	gdb¡©s_
.
g‘
(è!ğ
nuÎ±r
) {

202 
årštf
(
¡dout
, "STATISTICS:\n%s\n", 
db¡©s_
->
ToSŒšg
().
c_¡r
());

206 
	gRocksDB
::~
RocksDB
() {

207 
d–‘e
 
db_
;

208 ià(
	gÿche_
.
g‘
(è!ğ
nuÎ±r
) {

210 
ÿche_
->
DisownD©a
();

212 
d–‘e
 
	g’v
;

215 
	gRocksDB
::
S”ŸlizeV®ues
(
¡d
::
veùÜ
<
KVPaœ
> &
kvs
, std::
¡ršg
 &
v®ue
) {

216 
v®ue
.
ş—r
();

217 
PutFixed64
(&
v®ue
, 
kvs
.
size
());

218 
	gi
=0; i < 
	gkvs
.
size
(); i++){

219 
PutFixed64
(&
v®ue
, 
kvs
[
i
].
fœ¡
.
size
());

220 
	gv®ue
.
­³nd
(
kvs
[
i
].
fœ¡
);

221 
PutFixed64
(&
v®ue
, 
kvs
[
i
].
£cÚd
.
size
());

222 
	gv®ue
.
­³nd
(
kvs
[
i
].
£cÚd
);

226 
	gRocksDB
::
DeS”ŸlizeV®ues
(
¡d
::
¡ršg
 &
v®ue
, std::
veùÜ
<
KVPaœ
> &
kvs
){

227 
ušt64_t
 
off£t
 = 0;

228 
ušt64_t
 
	gkv_num
 = 0;

229 
ušt64_t
 
	gkey_size
 = 0;

230 
ušt64_t
 
	gv®ue_size
 = 0;

232 
	gkv_num
 = 
DecodeFixed64
(
v®ue
.
c_¡r
());

233 
	goff£t
 += 8;

234  
	gi
 = 0; i < 
	gkv_num
; i++){

235 
	gycsbc
::
DB
::
KVPaœ
 
·œ
;

236 
	gkey_size
 = 
DecodeFixed64
(
v®ue
.
c_¡r
(è+ 
off£t
);

237 
	goff£t
 += 8;

239 
	g·œ
.
	gfœ¡
.
assign
(
v®ue
.
c_¡r
(è+ 
off£t
, 
key_size
);

240 
	goff£t
 +ğ
key_size
;

242 
	gv®ue_size
 = 
DecodeFixed64
(
v®ue
.
c_¡r
(è+ 
off£t
);

243 
	goff£t
 += 8;

245 
	g·œ
.
	g£cÚd
.
assign
(
v®ue
.
c_¡r
(è+ 
off£t
, 
v®ue_size
);

246 
	goff£t
 +ğ
v®ue_size
;

247 
	gkvs
.
push_back
(
·œ
);

	@rocksdb_db.h

1 #iâdeà
YCSB_C_ROCKSDB_DB_H


2 
	#YCSB_C_ROCKSDB_DB_H


	)

4 
	~"ycsb/db.h
"

5 
	~<io¡»am
>

6 
	~<¡ršg
>

7 
	~"ycsb/´İ”t›s.h
"

8 
	~"ycsb/cÜe_wÜklßd.h
"

10 
	~<rocksdb/db.h
>

11 
	~<rocksdb/ÿche.h
>

12 
	~<rocksdb/bË.h
>

13 
	~<rocksdb/f‹r_pŞicy.h
>

14 
	~<rocksdb/İtiÚs.h
>

15 
	~<rocksdb/ut™›s/İtiÚs_ut.h
>

16 
	~<rocksdb/com·ùiÚ_f‹r.h
>

17 
	~<rocksdb/¦iû.h
>

21 
Çme¥aû
 
	gycsbc
 {

22 şas 
	cRocksDB
 : 
public
 
DB
 {

24 
public
 :

25 
In™
() {

26 
¡d
::
û¼
 << "RocksDB Initialization";

28 
Clo£
() {}

29 
RocksDB
(cÚ¡ *
dbf’ame
, 
uts
::
Prİ”t›s
 &
´İs
);

30 
R—d
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
,

31 cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> *
f›lds
,

32 
¡d
::
veùÜ
<
KVPaœ
> &
»suÉ
);

34 
Sÿn
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
,

35 
Ën
, cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> *
f›lds
,

36 
¡d
::
veùÜ
<¡d::veùÜ<
KVPaœ
>> &
»suÉ
);

39 
Sÿn
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
, cÚ¡ std::¡ršg &
max_key
,

40 
Ën
, cÚ¡ 
¡d
::
veùÜ
<¡d::
¡ršg
> *
f›lds
,

41 
¡d
::
veùÜ
<¡d::veùÜ<
KVPaœ
>> &
»suÉ
);

43 
In£¹
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
,

44 
¡d
::
veùÜ
<
KVPaœ
> &
v®ues
);

46 
Upd©e
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
,

47 
¡d
::
veùÜ
<
KVPaœ
> &
v®ues
);

50 
D–‘e
(cÚ¡ 
¡d
::
¡ršg
 &
bË
, cÚ¡ std::¡ršg &
key
);

52 
PrštSts
();

54 ~
RocksDB
();

56 
	g´iv©e
:

57 
rocksdb
::
DB
 *
db_
;

58 
	gnoResuÉ
;

59 
	g¡d
::
sh¬ed_±r
<
rocksdb
::
Cache
> 
ÿche_
;

60 
	g¡d
::
sh¬ed_±r
<
rocksdb
::
Sti¡ics
> 
db¡©s_
;

61 
boŞ
 
	gwr™e_sync_
;

62 
	gROCKSDB_NAMESPACE
::
Env
* 
’v
;

63 
boŞ
 
	gzns
;

65 
S‘O±iÚs
(
rocksdb
::
O±iÚs
 *
İtiÚs
, 
uts
::
Prİ”t›s
 &
´İs
, 
boŞ
 
zns
);

66 
S”ŸlizeV®ues
(
¡d
::
veùÜ
<
KVPaœ
> &
kvs
, std::
¡ršg
 &
v®ue
);

67 
DeS”ŸlizeV®ues
(
¡d
::
¡ršg
 &
v®ue
, std::
veùÜ
<
KVPaœ
> &
kvs
);

	@scrambled_zipfian_generator.h

9 #iâdeà
YCSB_C_SCRAMBLED_ZIPFIAN_GENERATOR_H_


10 
	#YCSB_C_SCRAMBLED_ZIPFIAN_GENERATOR_H_


	)

12 
	~"g’”©Ü.h
"

14 
	~<©omic
>

15 
	~<c¡dšt
>

16 
	~"uts.h
"

17 
	~"zfŸn_g’”©Ü.h
"

19 
Çme¥aû
 
	gycsbc
 {

21 
şass
 
	gSüambËdZfŸnG’”©Ü
 : 
public
 
G’”©Ü
<
ušt64_t
> {

22 
public
:

23 
SüambËdZfŸnG’”©Ü
(
ušt64_t
 
mš
, ušt64_ˆ
max
,

24 
zfŸn_cÚ¡
 = 
ZfŸnG’”©Ü
::
kZfŸnCÚ¡
) :

25 
ba£_
(
mš
), 
num_™ems_
(
max
 - min + 1),

26 
g’”©Ü_
(
mš
, 
max
, 
zfŸn_cÚ¡
) { }

28 
SüambËdZfŸnG’”©Ü
(
ušt64_t
 
num_™ems
) :

29 
SüambËdZfŸnG’”©Ü
(0, 
num_™ems
 - 1) { }

31 
ušt64_t
 
Next
();

32 
ušt64_t
 
La¡
();

34 
	g´iv©e
:

35 cÚ¡ 
ušt64_t
 
ba£_
;

36 cÚ¡ 
ušt64_t
 
	gnum_™ems_
;

37 
ZfŸnG’”©Ü
 
	gg’”©Ü_
;

39 
ušt64_t
 
SüambË
(ušt64_ˆ
v®ue
) const;

42 
šlše
 
ušt64_t
 
	gSüambËdZfŸnG’”©Ü
::
SüambË
(ušt64_ˆ
v®ue
) const {

43  
ba£_
 + 
uts
::
FNVHash64
(
v®ue
è% 
num_™ems_
;

46 
šlše
 
ušt64_t
 
	gSüambËdZfŸnG’”©Ü
::
Next
() {

47  
SüambË
(
g’”©Ü_
.
Next
());

50 
šlše
 
ušt64_t
 
	gSüambËdZfŸnG’”©Ü
::
La¡
() {

51  
SüambË
(
g’”©Ü_
.
La¡
());

	@skewed_latest_generator.h

9 #iâdeà
YCSB_C_SKEWED_LATEST_GENERATOR_H_


10 
	#YCSB_C_SKEWED_LATEST_GENERATOR_H_


	)

12 
	~"g’”©Ü.h
"

14 
	~<©omic
>

15 
	~<c¡dšt
>

16 
	~"couÁ”_g’”©Ü.h
"

17 
	~"zfŸn_g’”©Ü.h
"

19 
Çme¥aû
 
	gycsbc
 {

21 
şass
 
	gSkewedL©e¡G’”©Ü
 : 
public
 
G’”©Ü
<
ušt64_t
> {

22 
public
:

23 
SkewedL©e¡G’”©Ü
(
CouÁ”G’”©Ü
 &
couÁ”
) :

24 
basis_
(
couÁ”
), 
zfŸn_
(basis_.
La¡
()) {

25 
Next
();

28 
ušt64_t
 
Next
();

29 
ušt64_t
 
La¡
(è{  
	gÏ¡_
; }

30 
	g´iv©e
:

31 
CouÁ”G’”©Ü
 &
basis_
;

32 
ZfŸnG’”©Ü
 
	gzfŸn_
;

33 
	g¡d
::
©omic
<
ušt64_t
> 
Ï¡_
;

36 
šlše
 
ušt64_t
 
	gSkewedL©e¡G’”©Ü
::
Next
() {

37 
ušt64_t
 
max
 = 
basis_
.
La¡
();

38  
	gÏ¡_
 = 
max
 - 
zfŸn_
.
Next
(max);

	@timer.h

9 #iâdeà
YCSB_C_TIMER_H_


10 
	#YCSB_C_TIMER_H_


	)

12 
	~<chrÚo
>

14 
Çme¥aû
 
	guts
 {

16 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

17 şas 
	cTim”
 {

18 
	gpublic
:

19 
S¹
() {

20 
time_
 = 
Clock
::
now
();

23 
T
 
End
() {

24 
Du¿tiÚ
 
	g¥ª
;

25 
	gClock
::
time_pošt
 
t
 = 
Clock
::
now
();

26 
	g¥ª
 = 
¡d
::
chrÚo
::
du¿tiÚ_ÿ¡
<
Du¿tiÚ
>(
t
 - 
time_
);

27  
	g¥ª
.
couÁ
();

30 
	g´iv©e
:

31 
¡d
::
	tchrÚo
::
	thigh_»sŞutiÚ_şock
 
	tClock
;

32 
	g¡d
::
	tchrÚo
::
	tdu¿tiÚ
<
	tT
> 
	tDu¿tiÚ
;

34 
	gClock
::
time_pošt
 
time_
;

	@uniform_generator.h

9 #iâdeà
YCSB_C_UNIFORM_GENERATOR_H_


10 
	#YCSB_C_UNIFORM_GENERATOR_H_


	)

12 
	~"g’”©Ü.h
"

14 
	~<©omic
>

15 
	~<mu‹x
>

16 
	~<¿ndom
>

18 
Çme¥aû
 
	gycsbc
 {

20 
şass
 
	gUnifÜmG’”©Ü
 : 
public
 
G’”©Ü
<
ušt64_t
> {

21 
public
:

23 
UnifÜmG’”©Ü
(
ušt64_t
 
mš
, ušt64_ˆ
max
è: 
di¡_
(mš, maxè{ 
Next
(); }

25 
ušt64_t
 
Next
();

26 
ušt64_t
 
La¡
();

28 
	g´iv©e
:

29 
¡d
::
mt19937_64
 
g’”©Ü_
;

30 
	g¡d
::
unifÜm_št_di¡ributiÚ
<
ušt64_t
> 
di¡_
;

31 
ušt64_t
 
	gÏ¡_št_
;

32 
	g¡d
::
mu‹x
 
mu‹x_
;

35 
šlše
 
ušt64_t
 
	gUnifÜmG’”©Ü
::
Next
() {

36 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
lock
(
mu‹x_
);

37  
	gÏ¡_št_
 = 
di¡_
(
g’”©Ü_
);

40 
šlše
 
ušt64_t
 
	gUnifÜmG’”©Ü
::
La¡
() {

41 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
lock
(
mu‹x_
);

42  
	gÏ¡_št_
;

	@utils.h

9 #iâdeà
YCSB_C_UTILS_H_


10 
	#YCSB_C_UTILS_H_


	)

12 
	~<®gÜ™hm
>

13 
	~<c¡dšt
>

14 
	~<exû±iÚ
>

15 
	~<¿ndom
>

17 
Çme¥aû
 
	guts
 {

19 cÚ¡ 
ušt64_t
 
	gkFNVOff£tBasis64
 = 0xCBF29CE484222325;

20 cÚ¡ 
ušt64_t
 
	gkFNVPrime64
 = 1099511628211;

22 
šlše
 
ušt64_t
 
FNVHash64
(ušt64_ˆ
v®
) {

23 
ušt64_t
 
	ghash
 = 
kFNVOff£tBasis64
;

25 
	gi
 = 0; i < 8; i++) {

26 
ušt64_t
 
	goù‘
 = 
v®
 & 0x00ff;

27 
	gv®
 = 
v®
 >> 8;

29 
	ghash
 = 
hash
 ^ 
où‘
;

30 
	ghash
 = 
hash
 * 
kFNVPrime64
;

32  
	ghash
;

35 
šlše
 
ušt64_t
 
Hash
(ušt64_ˆ
v®
è{  
FNVHash64
(val); }

37 
šlše
 
RªdomDoubË
(
mš
 = 0.0, 
max
 = 1.0) {

38 
¡d
::
deçuÉ_¿ndom_’gše
 
g’”©Ü
;

39 
	g¡d
::
unifÜm_»®_di¡ributiÚ
<> 
unifÜm
(
mš
, 
max
);

40  
unifÜm
(
g’”©Ü
);

46 
šlše
 
RªdomPrštCh¬
() {

47  
¿nd
() % 94 + 33;

50 şas 
	cExû±iÚ
 : 
public
 
¡d
::
exû±iÚ
 {

51 
public
:

52 
Exû±iÚ
(cÚ¡ 
¡d
::
¡ršg
 &
mes§ge
è: 
mes§ge_
(message) { }

53 cÚ¡ * 
wh©
(ècÚ¡ 
nÛxû±
 {

54  
mes§ge_
.
c_¡r
();

56 
	g´iv©e
:

57 
¡d
::
¡ršg
 
mes§ge_
;

60 
šlše
 
boŞ
 
	$SŒToBoŞ
(
¡d
::
¡ršg
 
¡r
) {

61 
¡d
::
	`ŒªsfÜm
(
¡r
.
	`begš
(), sŒ.
	`’d
(), sŒ.begš(), ::
tŞow”
);

62 ià(
¡r
 == "true" || str == "1") {

63  
Œue
;

64 } ià(
¡r
 == "false" || str == "0") {

65  
çl£
;

67 
throw
 
	`Exû±iÚ
("Inv®id boŞ sŒšg: " + 
¡r
);

69 
	}
}

71 
šlše
 
	g¡d
::
¡ršg
 
	$Trim
(cÚ¡ 
¡d
::
¡ršg
 &
¡r
) {

72 autØ
äÚt
 = 
¡d
::
	`fšd_if_nÙ
(
¡r
.
	`begš
(), sŒ.
	`’d
(), [](
c
){  std::
	`is¥aû
(c); });

73  
¡d
::
	`¡ršg
(
äÚt
, std::
	`fšd_if_nÙ
(
¡r
.
	`rbegš
(), std::
¡ršg
::
	`cÚ¡_»v”£_™”©Ü
(front),

74 [](
c
){  
¡d
::
	`is¥aû
(c); }).
	`ba£
());

75 
	}
}

	@ycsbc.cc

9 
	~<c¡ršg
>

10 
	~<¡ršg
>

11 
	~<io¡»am
>

12 
	~<veùÜ
>

13 
	~<futu»
>

14 
	~"uts.h
"

15 
	~"tim”.h
"

16 
	~"ş›Á.h
"

17 
	~"cÜe_wÜklßd.h
"

18 
	~"db_çùÜy.h
"

20 
usšg
 
Çme¥aû
 
	g¡d
;

22 
U§geMes§ge
(cÚ¡ *
commªd
);

23 
boŞ
 
SŒS¹W™h
(cÚ¡ *
¡r
, cÚ¡ *
´e
);

24 
¡ršg
 
P¬£CommªdLše
(
¬gc
, cÚ¡ *
¬gv
[], 
uts
::
Prİ”t›s
 &
´İs
);

26 
	$D–eg©eCl›Á
(
ycsbc
::
DB
 *
db
, ycsbc::
CÜeWÜklßd
 *
wl
, cÚ¡ 
num_İs
,

27 
boŞ
 
is_lßdšg
) {

28 
db
->
	`In™
();

29 
ycsbc
::
Cl›Á
 
	`ş›Á
(*
db
, *
wl
);

30 
oks
 = 0;

31 
i
 = 0; i < 
num_İs
; ++i) {

32 ià(
is_lßdšg
) {

33 
oks
 +ğ
ş›Á
.
	`DoIn£¹
();

35 
oks
 +ğ
ş›Á
.
	`DoT¿n§ùiÚ
();

38 
db
->
	`Clo£
();

39  
oks
;

40 
	}
}

42 
	$maš
(cÚ¡ 
¬gc
, cÚ¡ *
¬gv
[]) {

43 
uts
::
Prİ”t›s
 
´İs
;

44 
¡ršg
 
fe_Çme
 = 
	`P¬£CommªdLše
(
¬gc
, 
¬gv
, 
´İs
);

46 
ycsbc
::
DB
 *
db
 = ycsbc::
DBFaùÜy
::
	`C»©eDB
(
´İs
);

47 ià(!
db
) {

48 
cout
 << "UnknowÀd©aba£‚am" << 
´İs
["dbÇme"] << 
’dl
;

49 
	`ex™
(0);

52 
ycsbc
::
CÜeWÜklßd
 
wl
;

53 
wl
.
	`In™
(
´İs
);

55 cÚ¡ 
num_th»ads
 = 
	`¡oi
(
´İs
.
	`G‘Prİ”ty
("threadcount", "1"));

58 
veùÜ
<
futu»
<>> 
aùu®_İs
;

59 
tÙ®_İs
 = 
	`¡oi
(
´İs
[
ycsbc
::
CÜeWÜklßd
::
RECORD_COUNT_PROPERTY
]);

60 
i
 = 0; i < 
num_th»ads
; ++i) {

61 
aùu®_İs
.
	`em¶aû_back
(
	`async
(
Ïunch
::
async
,

62 
D–eg©eCl›Á
, 
db
, &
wl
, 
tÙ®_İs
 / 
num_th»ads
, 
Œue
));

64 
	`as£¹
(()
aùu®_İs
.
	`size
(è=ğ
num_th»ads
);

66 
sum
 = 0;

67 autØ&
n
 : 
aùu®_İs
) {

68 
	`as£¹
(
n
.
	`v®id
());

69 
sum
 +ğ
n
.
	`g‘
();

71 
û¼
 << "# Lßdšg„ecÜds:\t" << 
sum
 << 
’dl
;

74 
aùu®_İs
.
	`ş—r
();

75 
tÙ®_İs
 = 
	`¡oi
(
´İs
[
ycsbc
::
CÜeWÜklßd
::
OPERATION_COUNT_PROPERTY
]);

76 
uts
::
Tim”
<> 
tim”
;

77 
tim”
.
	`S¹
();

78 
i
 = 0; i < 
num_th»ads
; ++i) {

79 
aùu®_İs
.
	`em¶aû_back
(
	`async
(
Ïunch
::
async
,

80 
D–eg©eCl›Á
, 
db
, &
wl
, 
tÙ®_İs
 / 
num_th»ads
, 
çl£
));

82 
	`as£¹
(()
aùu®_İs
.
	`size
(è=ğ
num_th»ads
);

84 
sum
 = 0;

85 autØ&
n
 : 
aùu®_İs
) {

86 
	`as£¹
(
n
.
	`v®id
());

87 
sum
 +ğ
n
.
	`g‘
();

89 
du¿tiÚ
 = 
tim”
.
	`End
();

90 
û¼
 << "# T¿n§ùiÚhroughpuˆ(KTPS)" << 
’dl
;

91 
û¼
 << 
´İs
["dbÇme"] << '\t' << 
fe_Çme
 << '\t' << 
num_th»ads
 << '\t';

92 
û¼
 << 
tÙ®_İs
 / 
du¿tiÚ
 / 1000 << 
’dl
;

93 
	}
}

95 
¡ršg
 
	$P¬£CommªdLše
(
¬gc
, cÚ¡ *
¬gv
[], 
uts
::
Prİ”t›s
 &
´İs
) {

96 
¬gšdex
 = 1;

97 
¡ršg
 
f’ame
;

98 
¬gšdex
 < 
¬gc
 && 
	`SŒS¹W™h
(
¬gv
[argindex], "-")) {

99 ià(
	`¡rcmp
(
¬gv
[
¬gšdex
], "-threads") == 0) {

100 
¬gšdex
++;

101 ià(
¬gšdex
 >ğ
¬gc
) {

102 
	`U§geMes§ge
(
¬gv
[0]);

103 
	`ex™
(0);

105 
´İs
.
	`S‘Prİ”ty
("th»adcouÁ", 
¬gv
[
¬gšdex
]);

106 
¬gšdex
++;

107 } ià(
	`¡rcmp
(
¬gv
[
¬gšdex
], "-db") == 0) {

108 
¬gšdex
++;

109 ià(
¬gšdex
 >ğ
¬gc
) {

110 
	`U§geMes§ge
(
¬gv
[0]);

111 
	`ex™
(0);

113 
´İs
.
	`S‘Prİ”ty
("dbÇme", 
¬gv
[
¬gšdex
]);

114 
¬gšdex
++;

115 } ià(
	`¡rcmp
(
¬gv
[
¬gšdex
], "-dbpath") == 0) {

116 
¬gšdex
++;

117 ià(
¬gšdex
 >ğ
¬gc
) {

118 
	`U§geMes§ge
(
¬gv
[0]);

119 
	`ex™
(0);

121 
´İs
.
	`S‘Prİ”ty
("db·th", 
¬gv
[
¬gšdex
]);

122 
¬gšdex
++;

123 } ià(
	`¡rcmp
(
¬gv
[
¬gšdex
], "-optpath") == 0) {

124 
¬gšdex
++;

125 ià(
¬gšdex
 >ğ
¬gc
) {

126 
	`U§geMes§ge
(
¬gv
[0]);

127 
	`ex™
(0);

129 
´İs
.
	`S‘Prİ”ty
("İ©h", 
¬gv
[
¬gšdex
]);

130 
¬gšdex
++;

132 } ià(
	`¡rcmp
(
¬gv
[
¬gšdex
], "-dbstatistics") == 0) {

133 
¬gšdex
++;

134 ià(
¬gšdex
 >ğ
¬gc
) {

135 
	`U§geMes§ge
(
¬gv
[0]);

136 
	`ex™
(0);

138 
´İs
.
	`S‘Prİ”ty
("db¡©i¡ics", 
¬gv
[
¬gšdex
]);

139 
¬gšdex
++;

141 } ià(
	`¡rcmp
(
¬gv
[
¬gšdex
], "-host") == 0) {

142 
¬gšdex
++;

143 ià(
¬gšdex
 >ğ
¬gc
) {

144 
	`U§geMes§ge
(
¬gv
[0]);

145 
	`ex™
(0);

147 
´İs
.
	`S‘Prİ”ty
("ho¡", 
¬gv
[
¬gšdex
]);

148 
¬gšdex
++;

149 } ià(
	`¡rcmp
(
¬gv
[
¬gšdex
], "-port") == 0) {

150 
¬gšdex
++;

151 ià(
¬gšdex
 >ğ
¬gc
) {

152 
	`U§geMes§ge
(
¬gv
[0]);

153 
	`ex™
(0);

155 
´İs
.
	`S‘Prİ”ty
("pÜt", 
¬gv
[
¬gšdex
]);

156 
¬gšdex
++;

157 } ià(
	`¡rcmp
(
¬gv
[
¬gšdex
], "-slaves") == 0) {

158 
¬gšdex
++;

159 ià(
¬gšdex
 >ğ
¬gc
) {

160 
	`U§geMes§ge
(
¬gv
[0]);

161 
	`ex™
(0);

163 
´İs
.
	`S‘Prİ”ty
("¦aves", 
¬gv
[
¬gšdex
]);

164 
¬gšdex
++;

165 } ià(
	`¡rcmp
(
¬gv
[
¬gšdex
], "-P") == 0) {

166 
¬gšdex
++;

167 ià(
¬gšdex
 >ğ
¬gc
) {

168 
	`U§geMes§ge
(
¬gv
[0]);

169 
	`ex™
(0);

171 
f’ame
.
	`assign
(
¬gv
[
¬gšdex
]);

172 
if¡»am
 
	`šput
(
¬gv
[
¬gšdex
]);

173 
Œy
 {

174 
´İs
.
	`Lßd
(
šput
);

175 } 
	`ÿtch
 (cÚ¡ 
¡ršg
 &
mes§ge
) {

176 
cout
 << 
mes§ge
 << 
’dl
;

177 
	`ex™
(0);

179 
šput
.
	`şo£
();

180 
¬gšdex
++;

182 
cout
 << "UnknowÀİtiÚ '" << 
¬gv
[
¬gšdex
] << "'" << 
’dl
;

183 
	`ex™
(0);

187 ià(
¬gšdex
 =ğ1 ||‡rgšdex !ğ
¬gc
) {

188 
	`U§geMes§ge
(
¬gv
[0]);

189 
	`ex™
(0);

192  
f’ame
;

193 
	}
}

195 
	$U§geMes§ge
(cÚ¡ *
commªd
) {

196 
cout
 << "U§ge: " << 
commªd
 << " [İtiÚs]" << 
’dl
;

197 
cout
 << "O±iÚs:" << 
’dl
;

198 
cout
 << " -th»ad n:ƒxecu‹ usšg‚h»ad (deçuÉ: 1)" << 
’dl
;

199 
cout
 << " -db dbÇme: s³cifyhÇmoàthDBØu£ (deçuÉ: basic)" << 
’dl
;

200 
cout
 << " -P…rİ”tyfe:†ßd…rİ”t› äomhgiv’ fe. MuÉË fe ÿn" << 
’dl
;

201 
cout
 << " b¥ecif›d,‡nd wÈb´oûs£d iÀthÜd” s³cif›d" << 
’dl
;

202 
	}
}

204 
šlše
 
boŞ
 
	$SŒS¹W™h
(cÚ¡ *
¡r
, cÚ¡ *
´e
) {

205  
	`¡ºcmp
(
¡r
, 
´e
, 
	`¡¾’
(pre)) == 0;

206 
	}
}

	@zipfian_generator.h

9 #iâdeà
YCSB_C_ZIPFIAN_GENERATOR_H_


10 
	#YCSB_C_ZIPFIAN_GENERATOR_H_


	)

12 
	~<ÿs£¹
>

13 
	~<cm©h
>

14 
	~<c¡dšt
>

15 
	~<mu‹x
>

16 
	~"uts.h
"

18 
Çme¥aû
 
	gycsbc
 {

20 
şass
 
	gZfŸnG’”©Ü
 : 
public
 
G’”©Ü
<
ušt64_t
> {

21 
public
:

22 
cÚ¡ex´
 cÚ¡ 
kZfŸnCÚ¡
 = 0.99;

23 cÚ¡ 
ušt64_t
 
	gkMaxNumI‹ms
 = (
UINT64_MAX
 >> 24);

25 
ZfŸnG’”©Ü
(
ušt64_t
 
mš
, ušt64_ˆ
max
,

26 
zfŸn_cÚ¡
 = 
kZfŸnCÚ¡
) :

27 
num_™ems_
(
max
 - 
mš
 + 1), 
ba£_
(mš), 
th‘a_
(
zfŸn_cÚ¡
),

28 
z‘a_n_
(0), 
n_fÜ_z‘a_
(0) {

29 
as£¹
(
num_™ems_
 >ğ2 &&‚um_™ems_ < 
kMaxNumI‹ms
);

30 
	gz‘a_2_
 = 
Z‘a
(2, 
th‘a_
);

31 
	g®pha_
 = 1.0 / (1.0 - 
th‘a_
);

32 
Rai£Z‘a
(
num_™ems_
);

33 
	g‘a_
 = 
E
();

35 
Next
();

38 
ZfŸnG’”©Ü
(
ušt64_t
 
num_™ems
) :

39 
ZfŸnG’”©Ü
(0, 
num_™ems
 - 1, 
kZfŸnCÚ¡
) { }

41 
ušt64_t
 
Next
(ušt64_ˆ
num_™ems
);

43 
ušt64_t
 
Next
(è{  Next(
num_™ems_
); }

45 
ušt64_t
 
La¡
();

47 
	g´iv©e
:

52 
Rai£Z‘a
(
ušt64_t
 
num
) {

53 
as£¹
(
num
 >ğ
n_fÜ_z‘a_
);

54 
	gz‘a_n_
 = 
Z‘a
(
n_fÜ_z‘a_
, 
num
, 
th‘a_
, 
z‘a_n_
);

55 
	gn_fÜ_z‘a_
 = 
num
;

58 
E
() {

59  (1 - 
	g¡d
::
pow
(2.0 / 
num_™ems_
, 1 - 
th‘a_
)) /

60 (1 - 
	gz‘a_2_
 / 
	gz‘a_n_
);

69 
Z‘a
(
ušt64_t
 
Ï¡_num
, ušt64_ˆ
cur_num
,

70 
th‘a
, 
Ï¡_z‘a
) {

71 
	gz‘a
 = 
Ï¡_z‘a
;

72 
ušt64_t
 
	gi
 = 
Ï¡_num
 + 1; i <ğ
cur_num
; ++i) {

73 
	gz‘a
 +ğ1 / 
¡d
::
pow
(
i
, 
th‘a
);

75  
	gz‘a
;

78 
Z‘a
(
ušt64_t
 
num
, 
th‘a
) {

79  
Z‘a
(0, 
num
, 
th‘a
, 0);

82 
ušt64_t
 
	gnum_™ems_
;

83 
ušt64_t
 
	gba£_
;

86 
	gth‘a_
, 
	gz‘a_n_
, 
	g‘a_
, 
	g®pha_
, 
	gz‘a_2_
;

87 
ušt64_t
 
	gn_fÜ_z‘a_
;

88 
ušt64_t
 
	gÏ¡_v®ue_
;

89 
	g¡d
::
mu‹x
 
mu‹x_
;

92 
šlše
 
ušt64_t
 
	gZfŸnG’”©Ü
::
Next
(ušt64_ˆ
num
) {

93 
as£¹
(
num
 >ğ2 &&‚um < 
kMaxNumI‹ms
);

94 
	g¡d
::
lock_gu¬d
<
¡d
::
mu‹x
> 
lock
(
mu‹x_
);

96 ià(
	gnum
 > 
	gn_fÜ_z‘a_
) {

97 
Rai£Z‘a
(
num
);

98 
	g‘a_
 = 
E
();

101 
	gu
 = 
uts
::
RªdomDoubË
();

102 
	guz
 = 
u
 * 
z‘a_n_
;

104 ià(
	guz
 < 1.0) {

105  
	gÏ¡_v®ue_
 = 0;

108 ià(
	guz
 < 1.0 + 
	g¡d
::
pow
(0.5, 
th‘a_
)) {

109  
	gÏ¡_v®ue_
 = 1;

112  
	gÏ¡_v®ue_
 = 
ba£_
 + 
num
 * 
¡d
::
pow
(
‘a_
 * 
u
 -ƒ_ + 1, 
®pha_
);

115 
šlše
 
ušt64_t
 
	gZfŸnG’”©Ü
::
La¡
() {

116 
¡d
::
lock_gu¬d
<¡d::
mu‹x
> 
lock
(
mu‹x_
);

117  
	gÏ¡_v®ue_
;

	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

26 
	~<b™s/libc-h—d”-¡¬t.h
>

27 
	~<b™s/ty³s.h
>

28 
	~<b™s/wch¬.h
>

29 
	~<b™s/wÜdsize.h
>

34 
	~<b™s/¡dšt-šŠ.h
>

37 
	~<b™s/¡dšt-ušŠ.h
>

43 sigÃd 
	tšt_Ëa¡8_t
;

44 
	tšt_Ëa¡16_t
;

45 
	tšt_Ëa¡32_t
;

46 #ià
__WORDSIZE
 == 64

47 
	tšt_Ëa¡64_t
;

49 
__ex‹nsiÚ__


50 
	tšt_Ëa¡64_t
;

54 
	tušt_Ëa¡8_t
;

55 
	tušt_Ëa¡16_t
;

56 
	tušt_Ëa¡32_t
;

57 #ià
__WORDSIZE
 == 64

58 
	tušt_Ëa¡64_t
;

60 
__ex‹nsiÚ__


61 
	tušt_Ëa¡64_t
;

68 sigÃd 
	tšt_ç¡8_t
;

69 #ià
__WORDSIZE
 == 64

70 
	tšt_ç¡16_t
;

71 
	tšt_ç¡32_t
;

72 
	tšt_ç¡64_t
;

74 
	tšt_ç¡16_t
;

75 
	tšt_ç¡32_t
;

76 
__ex‹nsiÚ__


77 
	tšt_ç¡64_t
;

81 
	tušt_ç¡8_t
;

82 #ià
__WORDSIZE
 == 64

83 
	tušt_ç¡16_t
;

84 
	tušt_ç¡32_t
;

85 
	tušt_ç¡64_t
;

87 
	tušt_ç¡16_t
;

88 
	tušt_ç¡32_t
;

89 
__ex‹nsiÚ__


90 
	tušt_ç¡64_t
;

95 #ià
__WORDSIZE
 == 64

96 #iâdeà
__šŒ_t_defšed


97 
	tšŒ_t
;

98 
	#__šŒ_t_defšed


	)

100 
	tušŒ_t
;

102 #iâdeà
__šŒ_t_defšed


103 
	tšŒ_t
;

104 
	#__šŒ_t_defšed


	)

106 
	tušŒ_t
;

111 
__štmax_t
 
	tštmax_t
;

112 
__uštmax_t
 
	tuštmax_t
;

115 #ià
__WORDSIZE
 == 64

116 
	#__INT64_C
(
c
èø## 
L


	)

117 
	#__UINT64_C
(
c
èø## 
UL


	)

119 
	#__INT64_C
(
c
èø## 
LL


	)

120 
	#__UINT64_C
(
c
èø## 
ULL


	)

126 
	#INT8_MIN
 (-128)

	)

127 
	#INT16_MIN
 (-32767-1)

	)

128 
	#INT32_MIN
 (-2147483647-1)

	)

129 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

131 
	#INT8_MAX
 (127)

	)

132 
	#INT16_MAX
 (32767)

	)

133 
	#INT32_MAX
 (2147483647)

	)

134 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

137 
	#UINT8_MAX
 (255)

	)

138 
	#UINT16_MAX
 (65535)

	)

139 
	#UINT32_MAX
 (4294967295U)

	)

140 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

144 
	#INT_LEAST8_MIN
 (-128)

	)

145 
	#INT_LEAST16_MIN
 (-32767-1)

	)

146 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

147 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

149 
	#INT_LEAST8_MAX
 (127)

	)

150 
	#INT_LEAST16_MAX
 (32767)

	)

151 
	#INT_LEAST32_MAX
 (2147483647)

	)

152 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

155 
	#UINT_LEAST8_MAX
 (255)

	)

156 
	#UINT_LEAST16_MAX
 (65535)

	)

157 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

158 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

162 
	#INT_FAST8_MIN
 (-128)

	)

163 #ià
__WORDSIZE
 == 64

164 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

165 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

167 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

168 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

170 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

172 
	#INT_FAST8_MAX
 (127)

	)

173 #ià
__WORDSIZE
 == 64

174 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

175 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

177 
	#INT_FAST16_MAX
 (2147483647)

	)

178 
	#INT_FAST32_MAX
 (2147483647)

	)

180 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

183 
	#UINT_FAST8_MAX
 (255)

	)

184 #ià
__WORDSIZE
 == 64

185 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

186 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

188 
	#UINT_FAST16_MAX
 (4294967295U)

	)

189 
	#UINT_FAST32_MAX
 (4294967295U)

	)

191 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

195 #ià
__WORDSIZE
 == 64

196 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

197 
	#INTPTR_MAX
 (9223372036854775807L)

	)

198 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

200 
	#INTPTR_MIN
 (-2147483647-1)

	)

201 
	#INTPTR_MAX
 (2147483647)

	)

202 
	#UINTPTR_MAX
 (4294967295U)

	)

207 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

209 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

218 #ià
__WORDSIZE
 == 64

219 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

220 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

222 #ià
__WORDSIZE32_PTRDIFF_LONG


223 
	#PTRDIFF_MIN
 (-2147483647L-1)

	)

224 
	#PTRDIFF_MAX
 (2147483647L)

	)

226 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

227 
	#PTRDIFF_MAX
 (2147483647)

	)

232 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

233 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

236 #ià
__WORDSIZE
 == 64

237 
	#SIZE_MAX
 (18446744073709551615UL)

	)

239 #ià
__WORDSIZE32_SIZE_ULONG


240 
	#SIZE_MAX
 (4294967295UL)

	)

242 
	#SIZE_MAX
 (4294967295U)

	)

247 #iâdeà
WCHAR_MIN


249 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

250 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

254 
	#WINT_MIN
 (0u)

	)

255 
	#WINT_MAX
 (4294967295u)

	)

258 
	#INT8_C
(
c
è
	)
c

259 
	#INT16_C
(
c
è
	)
c

260 
	#INT32_C
(
c
è
	)
c

261 #ià
__WORDSIZE
 == 64

262 
	#INT64_C
(
c
èø## 
L


	)

264 
	#INT64_C
(
c
èø## 
LL


	)

268 
	#UINT8_C
(
c
è
	)
c

269 
	#UINT16_C
(
c
è
	)
c

270 
	#UINT32_C
(
c
èø## 
U


	)

271 #ià
__WORDSIZE
 == 64

272 
	#UINT64_C
(
c
èø## 
UL


	)

274 
	#UINT64_C
(
c
èø## 
ULL


	)

278 #ià
__WORDSIZE
 == 64

279 
	#INTMAX_C
(
c
èø## 
L


	)

280 
	#UINTMAX_C
(
c
èø## 
UL


	)

282 
	#INTMAX_C
(
c
èø## 
LL


	)

283 
	#UINTMAX_C
(
c
èø## 
ULL


	)

286 #ià
__GLIBC_USE
 (
IEC_60559_BFP_EXT
)

288 
	#INT8_WIDTH
 8

	)

289 
	#UINT8_WIDTH
 8

	)

290 
	#INT16_WIDTH
 16

	)

291 
	#UINT16_WIDTH
 16

	)

292 
	#INT32_WIDTH
 32

	)

293 
	#UINT32_WIDTH
 32

	)

294 
	#INT64_WIDTH
 64

	)

295 
	#UINT64_WIDTH
 64

	)

297 
	#INT_LEAST8_WIDTH
 8

	)

298 
	#UINT_LEAST8_WIDTH
 8

	)

299 
	#INT_LEAST16_WIDTH
 16

	)

300 
	#UINT_LEAST16_WIDTH
 16

	)

301 
	#INT_LEAST32_WIDTH
 32

	)

302 
	#UINT_LEAST32_WIDTH
 32

	)

303 
	#INT_LEAST64_WIDTH
 64

	)

304 
	#UINT_LEAST64_WIDTH
 64

	)

306 
	#INT_FAST8_WIDTH
 8

	)

307 
	#UINT_FAST8_WIDTH
 8

	)

308 
	#INT_FAST16_WIDTH
 
__WORDSIZE


	)

309 
	#UINT_FAST16_WIDTH
 
__WORDSIZE


	)

310 
	#INT_FAST32_WIDTH
 
__WORDSIZE


	)

311 
	#UINT_FAST32_WIDTH
 
__WORDSIZE


	)

312 
	#INT_FAST64_WIDTH
 64

	)

313 
	#UINT_FAST64_WIDTH
 64

	)

315 
	#INTPTR_WIDTH
 
__WORDSIZE


	)

316 
	#UINTPTR_WIDTH
 
__WORDSIZE


	)

318 
	#INTMAX_WIDTH
 64

	)

319 
	#UINTMAX_WIDTH
 64

	)

321 
	#PTRDIFF_WIDTH
 
__WORDSIZE


	)

322 
	#SIG_ATOMIC_WIDTH
 32

	)

323 
	#SIZE_WIDTH
 
__WORDSIZE


	)

324 
	#WCHAR_WIDTH
 32

	)

325 
	#WINT_WIDTH
 32

	)

	@/usr/include/string.h

22 #iâdef 
_STRING_H


23 
	#_STRING_H
 1

	)

25 
	#__GLIBC_INTERNAL_STARTING_HEADER_IMPLEMENTATION


	)

26 
	~<b™s/libc-h—d”-¡¬t.h
>

28 
	g__BEGIN_DECLS


31 
	#__Ãed_size_t


	)

32 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

36 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

37 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

42 *
	$memıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

43 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

46 *
	$memmove
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
)

47 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

52 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


53 *
	$memcıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

54 
__c
, 
size_t
 
__n
)

55 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

60 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

63 
	$memcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

64 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

67 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


70 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

71 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

72 cÚ¡ *
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

73 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

75 #ifdeà
__OPTIMIZE__


76 
__ex‹º_®ways_šlše
 *

77 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


79  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

82 
__ex‹º_®ways_šlše
 const *

83 
	`memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


85  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

88 
	}
}

90 *
	$memchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

91 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

94 #ifdeà
__USE_GNU


97 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


98 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

99 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

100 "C++" cÚ¡ *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

101 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

103 *
	$¿wmemchr
 (cÚ¡ *
__s
, 
__c
)

104 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

108 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


109 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

110 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

111 "C++" cÚ¡ *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

112 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

114 *
	$memrchr
 (cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

115 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

121 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

122 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

124 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

125 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

126 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

129 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

130 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

132 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
,

133 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

136 
	$¡rcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

137 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

139 
	$¡ºcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

140 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

143 
	$¡rcŞl
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

144 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

146 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

147 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

148 
__THROW
 
	`__nÚnuÎ
 ((2));

150 #ifdeà
__USE_XOPEN2K8


152 
	~<b™s/ty³s/loÿË_t.h
>

155 
	$¡rcŞl_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
loÿË_t
 
__l
)

156 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

159 
size_t
 
	$¡rxäm_l
 (*
__de¡
, cÚ¡ *
__¤c
, 
size_t
 
__n
,

160 
loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

163 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8
 \

164 || 
	$__GLIBC_USE
 (
LIB_EXT2
))

166 *
	$¡rdup
 (cÚ¡ *
__s
)

167 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

173 #ià
defšed
 
__USE_XOPEN2K8
 || 
	`__GLIBC_USE
 (
LIB_EXT2
)

174 *
	$¡ºdup
 (cÚ¡ *
__¡ršg
, 
size_t
 
__n
)

175 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

178 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


180 
	#¡rdu·
(
s
) \

181 (
__ex‹nsiÚ__
 \

183 cÚ¡ *
__Şd
 = (
s
); \

184 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

185 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

186 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

187 
	}
}))

	)

190 
	#¡ºdu·
(
s
, 
n
) \

191 (
__ex‹nsiÚ__
 \

193 cÚ¡ *
__Şd
 = (
s
); \

194 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

195 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

196 
__Ãw
[
__Ën
] = '\0'; \

197 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

198 }))

	)

202 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


205 *
¡rchr
 (*
__s
, 
__c
)

206 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

207 cÚ¡ *
¡rchr
 (cÚ¡ *
__s
, 
__c
)

208 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

210 #ifdeà
__OPTIMIZE__


211 
__ex‹º_®ways_šlše
 *

212 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


214  
__butš_¡rchr
 (
__s
, 
__c
);

217 
__ex‹º_®ways_šlše
 const *

218 
¡rchr
 (cÚ¡ *
__s
, 
__c
è
	g__THROW


220  
__butš_¡rchr
 (
__s
, 
__c
);

225 *
	$¡rchr
 (cÚ¡ *
__s
, 
__c
)

226 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

229 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


232 *
	`¡¼chr
 (*
__s
, 
__c
)

233 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

234 cÚ¡ *
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
)

235 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

237 #ifdeà
__OPTIMIZE__


238 
__ex‹º_®ways_šlše
 *

239 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


241  
	`__butš_¡¼chr
 (
__s
, 
__c
);

244 
__ex‹º_®ways_šlše
 const *

245 
	`¡¼chr
 (cÚ¡ *
__s
, 
__c
è
__THROW


247  
	`__butš_¡¼chr
 (
__s
, 
__c
);

250 
	}
}

252 *
	$¡¼chr
 (cÚ¡ *
__s
, 
__c
)

253 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

256 #ifdeà
__USE_GNU


259 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


260 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

261 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

262 "C++" cÚ¡ *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

263 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

265 *
	$¡rchºul
 (cÚ¡ *
__s
, 
__c
)

266 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

272 
size_t
 
	$¡rc¥n
 (cÚ¡ *
__s
, cÚ¡ *
__»jeù
)

273 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

276 
size_t
 
	$¡r¥n
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

277 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

279 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


282 *
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
)

283 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

284 cÚ¡ *
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

285 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

287 #ifdeà
__OPTIMIZE__


288 
__ex‹º_®ways_šlše
 *

289 
	`¡½brk
 (*
__s
, cÚ¡ *
__acû±
è
__THROW


291  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

294 
__ex‹º_®ways_šlše
 const *

295 
	`¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
è
__THROW


297  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

300 
	}
}

302 *
	$¡½brk
 (cÚ¡ *
__s
, cÚ¡ *
__acû±
)

303 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

306 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


309 *
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

310 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

311 cÚ¡ *
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

312 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

314 #ifdeà
__OPTIMIZE__


315 
__ex‹º_®ways_šlše
 *

316 
	`¡r¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


318  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

321 
__ex‹º_®ways_šlše
 const *

322 
	`¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
è
__THROW


324  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

327 
	}
}

329 *
	$¡r¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

330 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

335 *
	$¡¹ok
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
)

336 
__THROW
 
	`__nÚnuÎ
 ((2));

340 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

341 cÚ¡ *
__»¡riù
 
__d–im
,

342 **
__»¡riù
 
__§ve_±r
)

343 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

344 #ifdeà
__USE_POSIX


345 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, cÚ¡ *__»¡riù 
__d–im
,

346 **
__»¡riù
 
__§ve_±r
)

347 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

350 #ifdeà
__USE_GNU


352 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


353 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, cÚ¡ *
__ÃedË
)

354 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

355 "C++" cÚ¡ *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
,

356 cÚ¡ *
__ÃedË
)

357 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

359 *
	$¡rÿ£¡r
 (cÚ¡ *
__hay¡ack
, cÚ¡ *
__ÃedË
)

360 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

364 #ifdeà
__USE_GNU


368 *
	$memmem
 (cÚ¡ *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

369 cÚ¡ *
__ÃedË
, 
size_t
 
__ÃedËËn
)

370 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

374 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

375 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

376 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

377 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

378 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

379 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

384 
size_t
 
	$¡¾’
 (cÚ¡ *
__s
)

385 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

387 #ifdef 
__USE_XOPEN2K8


390 
size_t
 
	$¡ºËn
 (cÚ¡ *
__¡ršg
, 
size_t
 
__maxËn
)

391 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

396 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

397 #ifdeà
__USE_XOPEN2K


405 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


408 #ifdeà
__REDIRECT_NTH


409 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

410 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

411 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

413 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

414 
__THROW
 
	`__nÚnuÎ
 ((2));

415 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

420 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

421 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

425 #ifdeà
__USE_XOPEN2K8


427 *
	$¡»¼Ü_l
 (
__”ºum
, 
loÿË_t
 
__l
è
__THROW
;

430 #ifdeà
__USE_MISC


431 
	~<¡ršgs.h
>

435 
	$ex¶ic™_bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

439 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

440 cÚ¡ *
__»¡riù
 
__d–im
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

444 #ifdef 
__USE_XOPEN2K8


446 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

449 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

450 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

451 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, cÚ¡ *__»¡riù 
__¤c
)

452 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

456 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

457 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

458 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

460 cÚ¡ *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

461 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

464 #ifdef 
__USE_GNU


466 
	$¡rv”scmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

467 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

470 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

473 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

475 #iâdeà
ba£Çme


480 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


481 "C++" *
	$ba£Çme
 (*
__f’ame
)

482 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

483 "C++" cÚ¡ *
	$ba£Çme
 (cÚ¡ *
__f’ame
)

484 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

486 *
	$ba£Çme
 (cÚ¡ *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

491 #ià
	`__GNUC_PREREQ
 (3,4)

492 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


494 
	~<b™s/¡ršg_fÜtif›d.h
>

498 
__END_DECLS


	@/usr/include/strings.h

18 #iâdef 
_STRINGS_H


19 
	#_STRINGS_H
 1

	)

21 
	~<ã©u»s.h
>

22 
	#__Ãed_size_t


	)

23 
	~<¡ddef.h
>

26 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

27 
	#__CORRECT_ISO_CPP_STRINGS_H_PROTO


	)

30 
	g__BEGIN_DECLS


32 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


34 
	$bcmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

35 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

38 
	$bcİy
 (cÚ¡ *
__¤c
, *
__de¡
, 
size_t
 
__n
)

39 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

42 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

45 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


48 *
	`šdex
 (*
__s
, 
__c
)

49 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

50 cÚ¡ *
	`šdex
 (cÚ¡ *
__s
, 
__c
)

51 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

53 #ià
defšed
 
__OPTIMIZE__


54 
__ex‹º_®ways_šlše
 *

55 
	`šdex
 (*
__s
, 
__c
è
__THROW


57  
	`__butš_šdex
 (
__s
, 
__c
);

60 
__ex‹º_®ways_šlše
 const *

61 
	`šdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


63  
	`__butš_šdex
 (
__s
, 
__c
);

66 
	}
}

68 *
	$šdex
 (cÚ¡ *
__s
, 
__c
)

69 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

73 #ifdeà
__CORRECT_ISO_CPP_STRINGS_H_PROTO


76 *
	`ršdex
 (*
__s
, 
__c
)

77 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

78 cÚ¡ *
	`ršdex
 (cÚ¡ *
__s
, 
__c
)

79 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

81 #ià
defšed
 
__OPTIMIZE__


82 
__ex‹º_®ways_šlše
 *

83 
	`ršdex
 (*
__s
, 
__c
è
__THROW


85  
	`__butš_ršdex
 (
__s
, 
__c
);

88 
__ex‹º_®ways_šlše
 const *

89 
	`ršdex
 (cÚ¡ *
__s
, 
__c
è
__THROW


91  
	`__butš_ršdex
 (
__s
, 
__c
);

94 
	}
}

96 *
	$ršdex
 (cÚ¡ *
__s
, 
__c
)

97 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

101 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8
 || defšed 
__USE_XOPEN2K8XSI


104 
	$ffs
 (
__i
è
__THROW
 
__©Œibu‹_cÚ¡__
;

109 #ifdef 
__USE_MISC


110 
	$ff¦
 (
__l
è
__THROW
 
__©Œibu‹_cÚ¡__
;

111 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

112 
__THROW
 
__©Œibu‹_cÚ¡__
;

116 
	$¡rÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
)

117 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

120 
	$¡ºÿ£cmp
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
size_t
 
__n
)

121 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

123 #ifdef 
__USE_XOPEN2K8


125 
	~<b™s/ty³s/loÿË_t.h
>

128 
	$¡rÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
, 
loÿË_t
 
__loc
)

129 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

133 
	$¡ºÿ£cmp_l
 (cÚ¡ *
__s1
, cÚ¡ *
__s2
,

134 
size_t
 
__n
, 
loÿË_t
 
__loc
)

135 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

138 
__END_DECLS


140 #ià
	`__GNUC_PREREQ
 (3,4è&& 
__USE_FORTIFY_LEVEL
 > 0 \

141 && 
defšed
 
__fÜtify_funùiÚ


143 #ià
defšed
 
__USE_MISC
 || !defšed 
__USE_XOPEN2K8


144 
	~<b™s/¡ršgs_fÜtif›d.h
>

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

119 #undeà
__USE_ISOC11


120 #undeà
__USE_ISOC99


121 #undeà
__USE_ISOC95


122 #undeà
__USE_ISOCXX11


123 #undeà
__USE_POSIX


124 #undeà
__USE_POSIX2


125 #undeà
__USE_POSIX199309


126 #undeà
__USE_POSIX199506


127 #undeà
__USE_XOPEN


128 #undeà
__USE_XOPEN_EXTENDED


129 #undeà
__USE_UNIX98


130 #undeà
__USE_XOPEN2K


131 #undeà
__USE_XOPEN2KXSI


132 #undeà
__USE_XOPEN2K8


133 #undeà
__USE_XOPEN2K8XSI


134 #undeà
__USE_LARGEFILE


135 #undeà
__USE_LARGEFILE64


136 #undeà
__USE_FILE_OFFSET64


137 #undeà
__USE_MISC


138 #undeà
__USE_ATFILE


139 #undeà
__USE_GNU


140 #undeà
__USE_FORTIFY_LEVEL


141 #undeà
__KERNEL_STRICT_NAMES


142 #undeà
__GLIBC_USE_DEPRECATED_GETS


146 #iâdeà
_LOOSE_KERNEL_NAMES


147 
	#__KERNEL_STRICT_NAMES


	)

157 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


158 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

159 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

161 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

168 #ià
defšed
 
__şªg_majÜ__
 && defšed 
__şªg_mšÜ__


169 
	#__glibc_şªg_´”eq
(
maj
, 
mš
) \

170 ((
__şªg_majÜ__
 << 16è+ 
__şªg_mšÜ__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

172 
	#__glibc_şªg_´”eq
(
maj
, 
mš
è0

	)

176 
	#__GLIBC_USE
(
F
è
__GLIBC_USE_
 ## 
	)
F

182 #ià(
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE
) \

183 && !
defšed
 
	g_DEFAULT_SOURCE


185 #undeà
_DEFAULT_SOURCE


186 
	#_DEFAULT_SOURCE
 1

	)

190 #ifdeà
_GNU_SOURCE


191 #undeà
_ISOC95_SOURCE


192 
	#_ISOC95_SOURCE
 1

	)

193 #undeà
_ISOC99_SOURCE


194 
	#_ISOC99_SOURCE
 1

	)

195 #undeà
_ISOC11_SOURCE


196 
	#_ISOC11_SOURCE
 1

	)

197 #undeà
_POSIX_SOURCE


198 
	#_POSIX_SOURCE
 1

	)

199 #undeà
_POSIX_C_SOURCE


200 
	#_POSIX_C_SOURCE
 200809L

	)

201 #undeà
_XOPEN_SOURCE


202 
	#_XOPEN_SOURCE
 700

	)

203 #undeà
_XOPEN_SOURCE_EXTENDED


204 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

205 #undeà
_LARGEFILE64_SOURCE


206 
	#_LARGEFILE64_SOURCE
 1

	)

207 #undeà
_DEFAULT_SOURCE


208 
	#_DEFAULT_SOURCE
 1

	)

209 #undeà
_ATFILE_SOURCE


210 
	#_ATFILE_SOURCE
 1

	)

215 #ià(
defšed
 
_DEFAULT_SOURCE
 \

216 || (!
defšed
 
	g__STRICT_ANSI__
 \

217 && !
defšed
 
	g_ISOC99_SOURCE
 \

218 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

219 && !
defšed
 
	g_XOPEN_SOURCE
))

220 #undeà
_DEFAULT_SOURCE


221 
	#_DEFAULT_SOURCE
 1

	)

225 #ià(
defšed
 
_ISOC11_SOURCE
 \

226 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

227 
	#__USE_ISOC11
 1

	)

231 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

232 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

233 
	#__USE_ISOC99
 1

	)

237 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

238 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

239 
	#__USE_ISOC95
 1

	)

242 #ifdeà
__ılu¥lus


244 #ià
__ılu¥lus
 >= 201703L

245 
	#__USE_ISOC11
 1

	)

249 #ià
__ılu¥lus
 >ğ201103L || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__


250 
	#__USE_ISOCXX11
 1

	)

251 
	#__USE_ISOC99
 1

	)

258 #ifdeà
_DEFAULT_SOURCE


259 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


260 
	#__USE_POSIX_IMPLICITLY
 1

	)

262 #undeà
_POSIX_SOURCE


263 
	#_POSIX_SOURCE
 1

	)

264 #undeà
_POSIX_C_SOURCE


265 
	#_POSIX_C_SOURCE
 200809L

	)

268 #ià((!
defšed
 
__STRICT_ANSI__
 \

269 || (
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

270 && !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

271 
	#_POSIX_SOURCE
 1

	)

272 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

273 
	#_POSIX_C_SOURCE
 2

	)

274 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

275 
	#_POSIX_C_SOURCE
 199506L

	)

276 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

277 
	#_POSIX_C_SOURCE
 200112L

	)

279 
	#_POSIX_C_SOURCE
 200809L

	)

281 
	#__USE_POSIX_IMPLICITLY
 1

	)

290 #ià((!
defšed
 
_POSIX_C_SOURCE
 || (_POSIX_C_SOURCE - 0) < 199506L) \

291 && (
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE
))

292 
	#_POSIX_SOURCE
 1

	)

293 #undeà
_POSIX_C_SOURCE


294 
	#_POSIX_C_SOURCE
 199506L

	)

297 #ià(
defšed
 
_POSIX_SOURCE
 \

298 || (
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

299 || 
defšed
 
_XOPEN_SOURCE
)

300 
	#__USE_POSIX
 1

	)

303 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


304 
	#__USE_POSIX2
 1

	)

307 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

308 
	#__USE_POSIX199309
 1

	)

311 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

312 
	#__USE_POSIX199506
 1

	)

315 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

316 
	#__USE_XOPEN2K
 1

	)

317 #undeà
__USE_ISOC95


318 
	#__USE_ISOC95
 1

	)

319 #undeà
__USE_ISOC99


320 
	#__USE_ISOC99
 1

	)

323 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

324 
	#__USE_XOPEN2K8
 1

	)

325 #undeà
_ATFILE_SOURCE


326 
	#_ATFILE_SOURCE
 1

	)

329 #ifdef 
_XOPEN_SOURCE


330 
	#__USE_XOPEN
 1

	)

331 #ià(
_XOPEN_SOURCE
 - 0) >= 500

332 
	#__USE_XOPEN_EXTENDED
 1

	)

333 
	#__USE_UNIX98
 1

	)

334 #undeà
_LARGEFILE_SOURCE


335 
	#_LARGEFILE_SOURCE
 1

	)

336 #ià(
_XOPEN_SOURCE
 - 0) >= 600

337 #ià(
_XOPEN_SOURCE
 - 0) >= 700

338 
	#__USE_XOPEN2K8
 1

	)

339 
	#__USE_XOPEN2K8XSI
 1

	)

341 
	#__USE_XOPEN2K
 1

	)

342 
	#__USE_XOPEN2KXSI
 1

	)

343 #undeà
__USE_ISOC95


344 
	#__USE_ISOC95
 1

	)

345 #undeà
__USE_ISOC99


346 
	#__USE_ISOC99
 1

	)

349 #ifdeà
_XOPEN_SOURCE_EXTENDED


350 
	#__USE_XOPEN_EXTENDED
 1

	)

355 #ifdeà
_LARGEFILE_SOURCE


356 
	#__USE_LARGEFILE
 1

	)

359 #ifdeà
_LARGEFILE64_SOURCE


360 
	#__USE_LARGEFILE64
 1

	)

363 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

364 
	#__USE_FILE_OFFSET64
 1

	)

367 #ià
defšed
 
_DEFAULT_SOURCE


368 
	#__USE_MISC
 1

	)

371 #ifdef 
_ATFILE_SOURCE


372 
	#__USE_ATFILE
 1

	)

375 #ifdef 
_GNU_SOURCE


376 
	#__USE_GNU
 1

	)

379 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

380 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

381 #ià
_FORTIFY_SOURCE
 > 1

382 
	#__USE_FORTIFY_LEVEL
 2

	)

384 
	#__USE_FORTIFY_LEVEL
 1

	)

387 
	#__USE_FORTIFY_LEVEL
 0

	)

394 #ià
defšed
 
__ılu¥lus
 ? __ılu¥lu >ğ201402L : defšed 
__USE_ISOC11


395 
	#__GLIBC_USE_DEPRECATED_GETS
 0

	)

397 
	#__GLIBC_USE_DEPRECATED_GETS
 1

	)

402 
	~<¡dc-´edef.h
>

410 #undeà
__GNU_LIBRARY__


411 
	#__GNU_LIBRARY__
 6

	)

415 
	#__GLIBC__
 2

	)

416 
	#__GLIBC_MINOR__
 27

	)

418 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

419 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

422 #iâdeà
__ASSEMBLER__


423 #iâdeà
_SYS_CDEFS_H


424 
	~<sys/cdefs.h
>

429 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


430 
	#__USE_LARGEFILE
 1

	)

431 
	#__USE_LARGEFILE64
 1

	)

437 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

438 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

439 && 
defšed
 
	g__ex‹º_šlše


440 
	#__USE_EXTERN_INLINES
 1

	)

448 
	~<gnu/¡ubs.h
>

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

58 
	#__STDC_ISO_10646__
 201706L

	)

61 
	#__STDC_NO_THREADS__
 1

	)

	@
1
.
1
/usr/include
27
444
basic_db.h
client.h
coding.h
const_generator.h
core_workload.cc
core_workload.h
counter_generator.h
db.h
db_factory.cc
db_factory.h
discrete_generator.h
generator.h
properties.h
rocksdb_db.cc
rocksdb_db.h
scrambled_zipfian_generator.h
skewed_latest_generator.h
timer.h
uniform_generator.h
utils.h
ycsbc.cc
zipfian_generator.h
/usr/include/stdint.h
/usr/include/string.h
/usr/include/strings.h
/usr/include/features.h
/usr/include/stdc-predef.h
